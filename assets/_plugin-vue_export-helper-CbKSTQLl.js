var $=Object.defineProperty;var b=e=>{throw TypeError(e)};var Q=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>Q(e,typeof t!="symbol"?t+"":t,n),K=(e,t,n)=>t.has(e)||b("Cannot "+n);var v=(e,t,n)=>(K(e,t,"read from private field"),n?n.call(e):t.get(e)),k=(e,t,n)=>t.has(e)?b("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);import{r as m,j as Z,q as C,c as A,g as W,o as y,W as H,s as B,h as tt,a4 as w,aF as et,aG as O,w as N,i as nt,aH as ot}from"./index-D7iQFX2a.js";import{d as Y}from"./pinia-R5NFpGXF.js";function rt(){const e=m(!Z.value);return e.value===!1&&C(()=>{e.value=!0}),{isHydrated:e}}const V=typeof ResizeObserver<"u",J=V===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},mt=A({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let n=null,o,r={width:-1,height:-1};function a(s){s===!0||e.debounce===0||e.debounce==="0"?i():n===null&&(n=setTimeout(i,e.debounce))}function i(){if(n!==null&&(clearTimeout(n),n=null),o){const{offsetWidth:s,offsetHeight:u}=o;(s!==r.width||u!==r.height)&&(r={width:s,height:u},t("resize",r))}}const{proxy:l}=W();if(l.trigger=a,V===!0){let s;const u=h=>{o=l.$el.parentNode,o?(s=new ResizeObserver(a),s.observe(o),i()):h!==!0&&B(()=>{u(!0)})};return C(()=>{u()}),y(()=>{n!==null&&clearTimeout(n),s!==void 0&&(s.disconnect!==void 0?s.disconnect():o&&s.unobserve(o))}),H}else{let s=function(){n!==null&&(clearTimeout(n),n=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",a,w.passive),d=void 0)},u=function(){s(),o&&o.contentDocument&&(d=o.contentDocument.defaultView,d.addEventListener("resize",a,w.passive),i())};const{isHydrated:h}=rt();let d;return C(()=>{B(()=>{o=l.$el,o&&u()})}),y(s),()=>{if(h.value===!0)return tt("object",{class:"q--avoid-card-border",style:J.style,tabindex:-1,type:"text/html",data:J.url,"aria-hidden":"true",onLoad:u})}}}}),at=[Element,String],st=[null,document,document.body,document.scrollingElement,document.documentElement];function it(e,t){let n=et(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return st.includes(n)?window:n}function z(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function j(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function X(e,t,n=0){const o=arguments[3]===void 0?performance.now():arguments[3],r=z(e);if(n<=0){r!==t&&E(e,t);return}requestAnimationFrame(a=>{const i=a-o,l=r+(t-r)/Math.max(i,n)*i;E(e,l),l!==t&&X(e,t,n-i,a)})}function q(e,t,n=0){const o=arguments[3]===void 0?performance.now():arguments[3],r=j(e);if(n<=0){r!==t&&F(e,t);return}requestAnimationFrame(a=>{const i=a-o,l=r+(t-r)/Math.max(i,n)*i;F(e,l),l!==t&&q(e,t,n-i,a)})}function E(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function F(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function gt(e,t,n){if(n){X(e,t,n);return}E(e,t)}function Rt(e,t,n){if(n){q(e,t,n);return}F(e,t)}let M;function Mt(){if(M!==void 0)return M;const e=document.createElement("p"),t=document.createElement("div");O(e,{width:"100%",height:"200px"}),O(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let o=e.offsetWidth;return n===o&&(o=t.clientWidth),t.remove(),M=n-o,M}function Ct(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}const{passive:P}=w,lt=["both","horizontal","vertical"],vt=A({name:"QScrollObserver",props:{axis:{type:String,validator:e=>lt.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:at},emits:["scroll"],setup(e,{emit:t}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,r,a;N(()=>e.scrollTarget,()=>{s(),l()});function i(){o!==null&&o();const d=Math.max(0,z(r)),I=j(r),x={top:d-n.position.top,left:I-n.position.left};if(e.axis==="vertical"&&x.top===0||e.axis==="horizontal"&&x.left===0)return;const _=Math.abs(x.top)>=Math.abs(x.left)?x.top<0?"up":"down":x.left<0?"left":"right";n.position={top:d,left:I},n.directionChanged=n.direction!==_,n.delta=x,n.directionChanged===!0&&(n.direction=_,n.inflectionPoint=n.position),t("scroll",{...n})}function l(){r=it(a,e.scrollTarget),r.addEventListener("scroll",u,P),u(!0)}function s(){r!==void 0&&(r.removeEventListener("scroll",u,P),r=void 0)}function u(d){if(d===!0||e.debounce===0||e.debounce==="0")i();else if(o===null){const[I,x]=e.debounce?[setTimeout(i,e.debounce),clearTimeout]:[requestAnimationFrame(i),cancelAnimationFrame];o=()=>{x(I),o=null}}}const{proxy:h}=W();return N(()=>h.$q.lang.rtl,i),C(()=>{a=h.$el.parentNode,l()}),y(()=>{o!==null&&o(),s()}),Object.assign(h,{trigger:u,getPosition:()=>n}),H}});function yt(){return nt(ot)}const Bt=async(e,t)=>{await B(),e.value[t]?.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},wt=e=>new Promise(t=>setTimeout(t,e));function ct(e,t){const n=Object.values(e).find(o=>o.value===t);return n||null}const T=e=>{if(typeof e!="string")throw new Error("Input must be a string");if(e.length%2!==0)throw new Error("Input must have an even number of characters");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=parseInt(e.substring(n,n+2),16);if(isNaN(o))throw new Error(`Invalid hex character at position ${n}: ${e.substring(n,n+2)}`);t[n/2]=o}return t},g=e=>{e=e.replace("#","");const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return{r:t,g:n,b:o}},Et=(e,t,n)=>"#"+((e<<16)+(t<<8)+n).toString(16).padStart(6,"0"),ut=(e,t)=>{if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array))throw new Error("Both source and target must be Uint8Array");for(let n=0;n<=e.length-t.length;n++)if(t.every((o,r)=>e[n+r]===o))return!0;return!1},U=e=>e.reduce((t,n)=>t+n,0)&255,p=e=>{const t=[];let n=0;for(const a of e){const{type:i,length:l,value:s}=a;if(i<0||i>255)throw new Error("Type must be between 0 and 255");if(l<0||l>255)throw new Error("itemLength must be between 0 and 255");if(l>0){if(s.length!==l)throw new Error("Value length does not match specified length");if(!(s instanceof Uint8Array))throw new Error("Value must be a Uint8Array")}const u=new Uint8Array(2+l);u[0]=i,u[1]=l,l>0&&u.set(s,2),t.push(u),n+=u.length}const o=new Uint8Array(n);let r=0;for(const a of t)o.set(a,r),r+=a.length;return{length:n,buffer:o}},Ft=e=>{if(!(e instanceof Uint8Array))throw new Error("Input must be a Uint8Array");const t=[];let n=0;for(;n<e.length;){const o=e[n++];if(n>=e.length)throw new Error("Unexpected end of buffer");let r=e[n++];if(r<0||r>255)throw new Error("Length must be between 0 and 255");if(n+r>e.length)throw new Error("Unexpected end of buffer");const a=e.slice(n,n+r);t.push({type:o,length:r,value:a}),n+=r}if(n!==e.length)throw new Error("Not all data was consumed");return t};class ht{constructor(){this.port=null,this.reader=null,this.writer=null,this.readPointer=0,this.isConnected=!1,this.receiveBuffer=new Uint8Array,this.callbacks={receive:[],error:null,stateChange:null}}on(t,n){return t==="receive"?this.callbacks.receive.push(n):t in this.callbacks&&(this.callbacks[t]=n),this}off(t,n){return t==="receive"?this.callbacks.receive=this.callbacks.receive.filter(o=>o!==n):t in this.callbacks&&(this.callbacks[t]=null),this}static isSupported(){return"serial"in navigator}async connect(t={baudRate:115200}){try{return this.port=await navigator.serial.requestPort(),await this.port.open(t),this.isConnected=!0,this._triggerStateChange(),this._startReading(),!0}catch(n){return this._handleError(n),!1}}async disconnect(){try{return this.reader&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close(),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close(),this.port=null),this.isConnected=!1,this._triggerStateChange(),!0}catch(t){throw new Error("Disconnect failed with error: "+t.message)}}clearBuffer(){this.receiveBuffer=new Uint8Array,this.readPointer=0}async sendRawData(t){if(!this.isConnected)return!1;try{return this.writer=this.port.writable.getWriter(),await this.writer.write(t),!0}catch(n){return this._handleError(n),!1}finally{this.writer&&(this.writer.releaseLock(),this.writer=null)}}async sendHex(t){return this.sendRawData(T(t))}async sendText(t){return this.sendRawData(new TextEncoder().encode(t))}async validateDevice({queryCommand:t,response:n,timeout:o=1e3}){if(!this.isConnected)throw new Error("Device not connected");const r=this.receiveBuffer.length;return new Promise(a=>{const i=setTimeout(()=>{this.off("receive",l),a({result:!1,reason:"Timeout"})},o),l=()=>{const s=this.receiveBuffer.slice(r);ut(s,n)&&(clearTimeout(i),this.off("receive",l),a({result:!0}))};this.on("receive",l),this.sendRawData(t)})}async _startReading(){try{for(this.reader=this.port.readable.getReader();;){const{value:t,done:n}=await this.reader.read();if(n)break;this.receiveBuffer=new Uint8Array([...this.receiveBuffer,...t]);const o=this.receiveBuffer.slice(this.readPointer);this.callbacks.receive.forEach(r=>r(o)),this.readPointer=this.receiveBuffer.length}}catch(t){this._handleError(t)}finally{this.reader.releaseLock()}}_triggerStateChange(){this.callbacks.stateChange&&this.callbacks.stateChange(this.isConnected)}async _handleError(t){console.error("SerialManager Error:",t),this.callbacks.error&&this.callbacks.error({type:"serial",message:t.message,stack:t.stack});try{await this.disconnect()}catch(n){console.error("Disconnect Error:",n),alert("Connection error, please refresh the page and replug the device.")}}}const Tt=Y("serialData",()=>{const e=m(new ht),t=m(null),n=m(null),o=m(!1),r=()=>{e.value.on("receive",i).on("error",s=>{s.value=s,console.log("err",s)})},a=async s=>(e.value.clearBuffer(),e.value.sendHex(s)),i=s=>{t.value=s};return{manager:e,receiveData:t,err:n,isConnected:o,setIsConnected:s=>{o.value=s},init:r,sendHex:a}}),dt={Horn:{separator:!0,value:1,hasFunction:!0,hasColor:!1},L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS2:{separator:!1,value:33,hasFunction:!0,hasColor:!1},RS1:{separator:!1,value:40,hasFunction:!0,hasColor:!1},RS2:{separator:!1,value:41,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},St=dt,Lt={L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},L5:{separator:!1,value:20,hasFunction:!0,hasColor:!0},L6:{separator:!1,value:21,hasFunction:!1,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},R5:{separator:!1,value:28,hasFunction:!0,hasColor:!0},R6:{separator:!1,value:29,hasFunction:!1,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS_CW:{separator:!0,value:36,hasFunction:!0,hasColor:!1},LS_CCW:{separator:!1,value:37,hasFunction:!0,hasColor:!1},RS1:{separator:!0,value:40,hasFunction:!0,hasColor:!1},RS_CW:{separator:!0,value:44,hasFunction:!0,hasColor:!1},RS_CCW:{separator:!1,value:45,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Gt={label:"None",separator:!0,value:1,hasFunction:!0,hasColor:!1};class S{constructor(t){this.buffer=t,this.buttons={Horn:{inputIndex:t[24],bufferIndex:24},L1:{inputIndex:t[25],bufferIndex:25,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[26],bufferIndex:26,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[27],bufferIndex:27,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[28],bufferIndex:28,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},R1:{inputIndex:t[29],bufferIndex:29,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},R2:{inputIndex:t[30],bufferIndex:30,colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R3:{inputIndex:t[31],bufferIndex:31,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R4:{inputIndex:t[32],bufferIndex:32,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},LS1:{inputIndex:t[33],bufferIndex:33},LS2:{inputIndex:t[34],bufferIndex:34},RS1:{inputIndex:t[35],bufferIndex:35},RS2:{inputIndex:t[36],bufferIndex:36},LJoystick_UP:{inputIndex:t[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:t[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:t[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:t[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:t[41],bufferIndex:41},LJoystick_CW:{inputIndex:t[42],bufferIndex:42},LJoystick_CCW:{inputIndex:t[43],bufferIndex:43},RJoystick_UP:{inputIndex:t[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:t[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:t[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:t[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:t[48],bufferIndex:48},RJoystick_CW:{inputIndex:t[49],bufferIndex:49},RJoystick_CCW:{inputIndex:t[50],bufferIndex:50}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,n=null,o=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(n===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[t];if(n&&(r.inputIndex=n,this.buffer[r.bufferIndex]=n),o){const a=g(o);r.colorR=a.r,r.colorG=a.g,r.colorB=a.b,this.buffer[r.colorRIndex]=a.r,this.buffer[r.colorGIndex]=a.g,this.buffer[r.colorBIndex]=a.b}}static parseRawData(t){if(t.length%51!==0)throw new Error("Invalid raw data length:"+t.length);const n=[];for(let o=0;o<t.length;o+=51){const r=t.slice(o,o+51);n.push(new S(r))}return n}}class L{constructor(t){this.buffer=t,this.buttons={Horn:{inputIndex:t[24],bufferIndex:24},L1:{inputIndex:t[25],bufferIndex:25,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[26],bufferIndex:26,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[27],bufferIndex:27,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[28],bufferIndex:28,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},R1:{inputIndex:t[29],bufferIndex:29,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},R2:{inputIndex:t[30],bufferIndex:30,colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R3:{inputIndex:t[31],bufferIndex:31,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R4:{inputIndex:t[32],bufferIndex:32,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},LS1:{inputIndex:t[33],bufferIndex:33},LS2:{inputIndex:t[34],bufferIndex:34},RS1:{inputIndex:t[35],bufferIndex:35},RS2:{inputIndex:t[36],bufferIndex:36},LJoystick_UP:{inputIndex:t[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:t[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:t[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:t[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:t[41],bufferIndex:41},LJoystick_CW:{inputIndex:t[42],bufferIndex:42},LJoystick_CCW:{inputIndex:t[43],bufferIndex:43},RJoystick_UP:{inputIndex:t[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:t[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:t[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:t[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:t[48],bufferIndex:48},RJoystick_CW:{inputIndex:t[49],bufferIndex:49},RJoystick_CCW:{inputIndex:t[50],bufferIndex:50}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,n=null,o=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(n===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[t];if(n&&(r.inputIndex=n,this.buffer[r.bufferIndex]=n),o){const a=g(o);r.colorR=a.r,r.colorG=a.g,r.colorB=a.b,this.buffer[r.colorRIndex]=a.r,this.buffer[r.colorGIndex]=a.g,this.buffer[r.colorBIndex]=a.b}}static parseRawData(t){if(t.length%51!==0)throw new Error("Invalid raw data length:"+t.length);const n=[];for(let o=0;o<t.length;o+=51){const r=t.slice(o,o+51);n.push(new L(r))}return n}}class G{constructor(t){this.buffer=t,this.buttons={L1:{inputIndex:t[36],bufferIndex:36,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[37],bufferIndex:37,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[38],bufferIndex:38,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[39],bufferIndex:39,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},L5:{inputIndex:t[40],bufferIndex:40,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},L6:{colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R1:{inputIndex:t[41],bufferIndex:41,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R2:{inputIndex:t[42],bufferIndex:42,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},R3:{inputIndex:t[43],bufferIndex:43,colorR:Math.min(Math.round(t[24]*2.55),255),colorRIndex:24,colorG:Math.min(Math.round(t[25]*2.55),255),colorGIndex:25,colorB:Math.min(Math.round(t[26]*2.55),255),colorBIndex:26},R4:{inputIndex:t[44],bufferIndex:44,colorR:Math.min(Math.round(t[27]*2.55),255),colorRIndex:27,colorG:Math.min(Math.round(t[28]*2.55),255),colorGIndex:28,colorB:Math.min(Math.round(t[29]*2.55),255),colorBIndex:29},R5:{inputIndex:t[45],bufferIndex:45,colorR:Math.min(Math.round(t[30]*2.55),255),colorRIndex:30,colorG:Math.min(Math.round(t[31]*2.55),255),colorGIndex:31,colorB:Math.min(Math.round(t[32]*2.55),255),colorBIndex:32},R6:{colorR:Math.min(Math.round(t[33]*2.55),255),colorRIndex:33,colorG:Math.min(Math.round(t[34]*2.55),255),colorGIndex:34,colorB:Math.min(Math.round(t[35]*2.55),255),colorBIndex:35},LS1:{inputIndex:t[46],bufferIndex:46},LS_CW:{inputIndex:t[47],bufferIndex:47},LS_CCW:{inputIndex:t[48],bufferIndex:48},RS1:{inputIndex:t[49],bufferIndex:49},RS_CW:{inputIndex:t[50],bufferIndex:50},RS_CCW:{inputIndex:t[51],bufferIndex:51},LJoystick_UP:{inputIndex:t[52],bufferIndex:52},LJoystick_DOWN:{inputIndex:t[53],bufferIndex:53},LJoystick_LEFT:{inputIndex:t[54],bufferIndex:54},LJoystick_RIGHT:{inputIndex:t[55],bufferIndex:55},LJoystick_CENTER:{inputIndex:t[56],bufferIndex:56},LJoystick_CW:{inputIndex:t[57],bufferIndex:57},LJoystick_CCW:{inputIndex:t[58],bufferIndex:58},RJoystick_UP:{inputIndex:t[59],bufferIndex:59},RJoystick_DOWN:{inputIndex:t[60],bufferIndex:60},RJoystick_LEFT:{inputIndex:t[61],bufferIndex:61},RJoystick_RIGHT:{inputIndex:t[62],bufferIndex:62},RJoystick_CENTER:{inputIndex:t[63],bufferIndex:63},RJoystick_CW:{inputIndex:t[64],bufferIndex:64},RJoystick_CCW:{inputIndex:t[65],bufferIndex:65}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,n=null,o=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(n===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[t];if(n&&(r.inputIndex=n,this.buffer[r.bufferIndex]=n),o){const a=g(o);r.colorR=a.r,r.colorG=a.g,r.colorB=a.b,this.buffer[r.colorRIndex]=a.r,this.buffer[r.colorGIndex]=a.g,this.buffer[r.colorBIndex]=a.b}}static parseRawData(t){if(t.length%66!==0)throw new Error("Invalid raw data length:"+t.length);const n=[];for(let o=0;o<t.length;o+=66){const r=t.slice(o,o+66);n.push(new G(r))}return n}}const xt={PRO:{label:"PRO",value:1},AIR:{label:"AIR",value:2},GT:{label:"GT",value:3}},_t=Y("hubConfig",{state:()=>({isAvailable:!1,modelByte:0,lastBridgeConnCarVendorByte:0,majorVersionByte:0,minorVersionByte:0,patchVersionByte:0,profileByte:0,buttonDayBrightness:0,buttonNightBrightness:0,rpmDayBrightness:0,rpmNightBrightness:0,rpmPatternByte:0,rpmStage1ColorR:0,rpmStage1ColorG:0,rpmStage1ColorB:0,rpmStage2ColorR:0,rpmStage2ColorG:0,rpmStage2ColorB:0,rpmStage3ColorR:0,rpmStage3ColorG:0,rpmStage3ColorB:0,rpmRedlineColorR:0,rpmRedlineColorG:0,rpmRedlineColorB:0,buttonConfigs:null}),actions:{setIsAvailable(e){this.isAvailable=e},setInfo(e){if(!(e instanceof Uint8Array)){console.error("infoArray is not Uint8Array");return}this.modelByte=e[0],this.lastBridgeConnCarVendorByte=e[1],this.majorVersionByte=e[2]>>4,this.minorVersionByte=e[2]&15,this.patchVersionByte=e[3]},setProfile(e){if(!(e instanceof Uint8Array)){console.error("profileArray is not Uint8Array");return}this.profileByte=e[0]},setBrightness(e){if(!(e instanceof Uint8Array)){console.error("brightnessArray is not Uint8Array");return}this.buttonDayBrightness=Math.min(e[0],100),this.buttonNightBrightness=Math.min(e[1],100),this.rpmDayBrightness=Math.min(e[2],100),this.rpmNightBrightness=Math.min(e[3],100)},setAllButtonConfig(e){if(!(e instanceof Uint8Array)){console.error("buttonConfigArray is not Uint8Array");return}switch(ct(xt,this.modelByte).label){case"PRO":this.buttonConfigs=S.parseRawData(e);break;case"AIR":this.buttonConfigs=L.parseRawData(e);break;case"GT":this.buttonConfigs=G.parseRawData(e);break}this.isAvailable=!0},setRpmConfig(e){if(!(e instanceof Uint8Array)){console.error("rpmArray is not Uint8Array");return}this.rpmPatternByte=e[0],this.rpmStage1ColorR=Math.min(Math.round(e[1]*2.55),255),this.rpmStage1ColorG=Math.min(Math.round(e[2]*2.55),255),this.rpmStage1ColorB=Math.min(Math.round(e[3]*2.55),255),this.rpmStage2ColorR=Math.min(Math.round(e[4]*2.55),255),this.rpmStage2ColorG=Math.min(Math.round(e[5]*2.55),255),this.rpmStage2ColorB=Math.min(Math.round(e[6]*2.55),255),this.rpmStage3ColorR=Math.min(Math.round(e[7]*2.55),255),this.rpmStage3ColorG=Math.min(Math.round(e[8]*2.55),255),this.rpmStage3ColorB=Math.min(Math.round(e[9]*2.55),255),this.rpmRedlineColorR=Math.min(Math.round(e[10]*2.55),255),this.rpmRedlineColorG=Math.min(Math.round(e[11]*2.55),255),this.rpmRedlineColorB=Math.min(Math.round(e[12]*2.55),255)}},getters:{}});var R;const c=class c{static verify(t){if(!(t instanceof Uint8Array))throw new Error("Frame must be a Uint8Array");const n=T(v(c,R));if(t[0]!==n[0]||t[1]!==n[1])throw new Error("Invalid frame header");const o=t.slice(0,-1);if(U(o)!==t[t.length-1])throw new Error("Invalid checksum");return{cmd:t[2],data:t.slice(5,-1)}}static generateFrame(t,n){const o=T(v(c,R)),r=n.length,a=new Uint8Array(6+r);a[0]=o[0],a[1]=o[1],a[2]=t,a[3]=r>>8&255,a[4]=r&255,a.set(n,5);const i=U(a.slice(0,-1));return a[a.length-1]=i,a}static generateValidateFrame(t){if(!Object.hasOwn(c.SOURCE_BYTE,t))throw new Error("Invalid source byte");const n=c.SOURCE_BYTE[t],o={type:c.TLV_TYPE.SOURCE,length:1,value:new Uint8Array([n])},{buffer:r}=p([o]);return this.generateFrame(c.CMD_BYTE.VALIDATE,r)}static generateFetchInfoFrame(){const t=[{type:c.CONFIG_BYTE.INFO,length:0,value:null},{type:c.CONFIG_BYTE.PROFILE,length:0,value:null},{type:c.CONFIG_BYTE.BRIGHTNESS,length:0,value:null},{type:c.CONFIG_BYTE.BUTTON,length:0,value:null},{type:c.CONFIG_BYTE.RPM,length:0,value:null}],{buffer:n}=p(t);return this.generateFrame(c.CMD_BYTE.GET_CONFIG,n)}static generateSetProfileFrame(t){const n=[{type:c.CONFIG_BYTE.PROFILE,length:1,value:new Uint8Array([t])}],{buffer:o}=p(n);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,o)}static generateSetBrightnessFrame(t=null,n=null){let o=255;n===null||n>100?o=100:o=n;const r=[{type:c.CONFIG_BYTE.BRIGHTNESS,length:2,value:new Uint8Array([t,o])}],{buffer:a}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,a)}static generateSetButtonDayBrightnessFrame(t=null){return this.generateSetBrightnessFrame(1,t)}static generateSetButtonNightBrightnessFrame(t=null){return this.generateSetBrightnessFrame(2,t)}static generateSetRpmDayBrightnessFrame(t=null){return this.generateSetBrightnessFrame(4,t)}static generateSetRpmNightBrightnessFrame(t=null){return this.generateSetBrightnessFrame(8,t)}static generateEnableBrightnessFrame(t,n){let o=0;t===0&&(o|=1),n===0&&(o|=2);const r=[{type:c.CONFIG_BYTE.ENABLE_BRIGHTNESS,length:1,value:new Uint8Array([o])}],{buffer:a}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,a)}static generateEnableDayBrightnessFrame(t){return this.generateEnableBrightnessFrame(1,t)}static generateEnableNightBrightnessFrame(t){return this.generateEnableBrightnessFrame(0,t)}static generateSetButtonFrame(t,n,o=null,r=null){if(t===null)throw new Error("buttonByte cannot be null");if(n===null)throw new Error("profileByte cannot be null");if(o===null&&r===null)throw new Error("func and rgb cannot be null at the same time");let a=0,i=255,l=255,s=255,u=255;if(o!==null&&(a|=1,i=o),r!==null){a|=2;const I=g(r);l=I.r,s=I.g,u=I.b}const h=[{type:c.CONFIG_BYTE.BUTTON,length:7,value:new Uint8Array([t,n,a&255,i,l,s,u])}],{buffer:d}=p(h);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,d)}static generateSetRpmFrame(t,n,o=null){if(t===null&&n===null)throw new Error("patternByte and stageByte cannot be null at the same time");let r=0,a=255,i=255,l=255;if(t!==null)r=1;else if(n!==null&&(r=2,o!==null)){const h=g(o);a=h.r,i=h.g,l=h.b}const s=[{type:c.CONFIG_BYTE.RPM,length:6,value:new Uint8Array([r,t,n,a,i,l])}],{buffer:u}=p(s);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,u)}static generateSetRpmPatternFrame(t){return this.generateSetRpmFrame(t,null,null)}static generateSetRpmStage1Color(t){return this.generateSetRpmFrame(null,0,t)}static generateSetRpmStage2Color(t){return this.generateSetRpmFrame(null,1,t)}static generateSetRpmStage3Color(t){return this.generateSetRpmFrame(null,2,t)}static generateSetRpmRedlineColor(t){return this.generateSetRpmFrame(null,3,t)}};R=new WeakMap,k(c,R,"5043"),f(c,"CMD_BYTE",{VALIDATE:0,GET_CONFIG:2,SET_CONFIG:3}),f(c,"TLV_TYPE",{SOURCE:1,CONFIG:2}),f(c,"SOURCE_BYTE",{OK:0,WEBSITE:1,APP:2,EXIT:250,FACTORY:252,FAIL:255}),f(c,"CONFIG_BYTE",{INFO:0,PROFILE:1,BRIGHTNESS:2,BUTTON:3,ENABLE_BRIGHTNESS:4,RPM:5});let D=c;const bt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n};export{St as A,Gt as D,Lt as G,xt as H,dt as P,mt as Q,Et as R,D as U,bt as _,vt as a,_t as b,yt as c,wt as d,gt as e,j as f,Mt as g,z as h,Ct as i,Bt as j,at as k,it as l,g as m,ct as n,Rt as s,Ft as t,Tt as u};
