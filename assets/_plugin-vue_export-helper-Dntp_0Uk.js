var X=Object.defineProperty;var G=t=>{throw TypeError(t)};var q=(t,e,n)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var f=(t,e,n)=>q(t,typeof e!="symbol"?e+"":e,n),$=(t,e,n)=>e.has(t)||G("Cannot "+n);var m=(t,e,n)=>($(t,e,"read from private field"),n?n.call(t):e.get(t)),b=(t,e,n)=>e.has(t)?G("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);import{r as g,j as Q,q as y,c as U,g as A,o as w,W as D,s as E,h as K,a4 as F,aF as Z,aG as k,w as O,i as ee,aH as te}from"./index-Bys5dP8g.js";import{d as W}from"./pinia-28iF_jMY.js";function ne(){const t=g(!Q.value);return t.value===!1&&y(()=>{t.value=!0}),{isHydrated:t}}const H=typeof ResizeObserver<"u",N=H===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},ge=U({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:e}){let n=null,o,r={width:-1,height:-1};function s(a){a===!0||t.debounce===0||t.debounce==="0"?l():n===null&&(n=setTimeout(l,t.debounce))}function l(){if(n!==null&&(clearTimeout(n),n=null),o){const{offsetWidth:a,offsetHeight:u}=o;(a!==r.width||u!==r.height)&&(r={width:a,height:u},e("resize",r))}}const{proxy:i}=A();if(i.trigger=s,H===!0){let a;const u=d=>{o=i.$el.parentNode,o?(a=new ResizeObserver(s),a.observe(o),l()):d!==!0&&E(()=>{u(!0)})};return y(()=>{u()}),w(()=>{n!==null&&clearTimeout(n),a!==void 0&&(a.disconnect!==void 0?a.disconnect():o&&a.unobserve(o))}),D}else{let a=function(){n!==null&&(clearTimeout(n),n=null),h!==void 0&&(h.removeEventListener!==void 0&&h.removeEventListener("resize",s,F.passive),h=void 0)},u=function(){a(),o&&o.contentDocument&&(h=o.contentDocument.defaultView,h.addEventListener("resize",s,F.passive),l())};const{isHydrated:d}=ne();let h;return y(()=>{E(()=>{o=i.$el,o&&u()})}),w(a),()=>{if(d.value===!0)return K("object",{class:"q--avoid-card-border",style:N.style,tabindex:-1,type:"text/html",data:N.url,"aria-hidden":"true",onLoad:u})}}}}),oe=[Element,String],re=[null,document,document.body,document.scrollingElement,document.documentElement];function se(t,e){let n=Z(e);if(n===void 0){if(t==null)return window;n=t.closest(".scroll,.scroll-y,.overflow-auto")}return re.includes(n)?window:n}function Y(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function V(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function z(t,e,n=0){const o=arguments[3]===void 0?performance.now():arguments[3],r=Y(t);if(n<=0){r!==e&&T(t,e);return}requestAnimationFrame(s=>{const l=s-o,i=r+(e-r)/Math.max(l,n)*l;T(t,i),i!==e&&z(t,e,n-l,s)})}function j(t,e,n=0){const o=arguments[3]===void 0?performance.now():arguments[3],r=V(t);if(n<=0){r!==e&&S(t,e);return}requestAnimationFrame(s=>{const l=s-o,i=r+(e-r)/Math.max(l,n)*l;S(t,i),i!==e&&j(t,e,n-l,s)})}function T(t,e){if(t===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e);return}t.scrollTop=e}function S(t,e){if(t===window){window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}t.scrollLeft=e}function Re(t,e,n){if(n){z(t,e,n);return}T(t,e)}function Ce(t,e,n){if(n){j(t,e,n);return}S(t,e)}let B;function ve(){if(B!==void 0)return B;const t=document.createElement("p"),e=document.createElement("div");k(t,{width:"100%",height:"200px"}),k(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let o=t.offsetWidth;return n===o&&(o=e.clientWidth),e.remove(),B=n-o,B}function Be(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}const{passive:J}=F,ae=["both","horizontal","vertical"],ye=U({name:"QScrollObserver",props:{axis:{type:String,validator:t=>ae.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:oe},emits:["scroll"],setup(t,{emit:e}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,r,s;O(()=>t.scrollTarget,()=>{a(),i()});function l(){o!==null&&o();const h=Math.max(0,Y(r)),I=V(r),x={top:h-n.position.top,left:I-n.position.left};if(t.axis==="vertical"&&x.top===0||t.axis==="horizontal"&&x.left===0)return;const _=Math.abs(x.top)>=Math.abs(x.left)?x.top<0?"up":"down":x.left<0?"left":"right";n.position={top:h,left:I},n.directionChanged=n.direction!==_,n.delta=x,n.directionChanged===!0&&(n.direction=_,n.inflectionPoint=n.position),e("scroll",{...n})}function i(){r=se(s,t.scrollTarget),r.addEventListener("scroll",u,J),u(!0)}function a(){r!==void 0&&(r.removeEventListener("scroll",u,J),r=void 0)}function u(h){if(h===!0||t.debounce===0||t.debounce==="0")l();else if(o===null){const[I,x]=t.debounce?[setTimeout(l,t.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];o=()=>{x(I),o=null}}}const{proxy:d}=A();return O(()=>d.$q.lang.rtl,l),y(()=>{s=d.$el.parentNode,i()}),w(()=>{o!==null&&o(),a()}),Object.assign(d,{trigger:u,getPosition:()=>n}),D}});function me(){return ee(te)}const we=async(t,e)=>{await E(),t.value[e]?.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},Ee=t=>new Promise(e=>setTimeout(e,t));function le(t,e){const n=Object.values(t).find(o=>o.value===e);return n||null}const L=t=>{if(typeof t!="string")throw new Error("Input must be a string");if(t.length%2!==0)throw new Error("Input must have an even number of characters");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const o=parseInt(t.substring(n,n+2),16);if(isNaN(o))throw new Error(`Invalid hex character at position ${n}: ${t.substring(n,n+2)}`);e[n/2]=o}return e},R=t=>{t=t.replace("#","");const e=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);return{r:e,g:n,b:o}},Fe=(t,e,n)=>"#"+((t<<16)+(e<<8)+n).toString(16).padStart(6,"0"),ie=(t,e)=>{if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array))throw new Error("Both source and target must be Uint8Array");for(let n=0;n<=t.length-e.length;n++)if(e.every((o,r)=>t[n+r]===o))return!0;return!1},M=t=>t.reduce((e,n)=>e+n,0)&255,p=t=>{const e=[];let n=0;for(const s of t){const{type:l,length:i,value:a}=s;if(l<0||l>255)throw new Error("Type must be between 0 and 255");if(i<0||i>255)throw new Error("itemLength must be between 0 and 255");if(i>0){if(a.length!==i)throw new Error("Value length does not match specified length");if(!(a instanceof Uint8Array))throw new Error("Value must be a Uint8Array")}const u=new Uint8Array(2+i);u[0]=l,u[1]=i,i>0&&u.set(a,2),e.push(u),n+=u.length}const o=new Uint8Array(n);let r=0;for(const s of e)o.set(s,r),r+=s.length;return{length:n,buffer:o}},Te=t=>{if(!(t instanceof Uint8Array))throw new Error("Input must be a Uint8Array");const e=[];let n=0;for(;n<t.length;){const o=t[n++];if(n>=t.length)throw new Error("Unexpected end of buffer");let r=t[n++];if(r<0||r>255)throw new Error("Length must be between 0 and 255");if(n+r>t.length)throw new Error("Unexpected end of buffer");const s=t.slice(n,n+r);e.push({type:o,length:r,value:s}),n+=r}if(n!==t.length)throw new Error("Not all data was consumed");return e};class ce{constructor(){this.port=null,this.reader=null,this.writer=null,this.readPointer=0,this.isConnected=!1,this.receiveBuffer=new Uint8Array,this.callbacks={receive:[],error:null,stateChange:null}}on(e,n){return e==="receive"?this.callbacks.receive.push(n):e in this.callbacks&&(this.callbacks[e]=n),this}off(e,n){return e==="receive"?this.callbacks.receive=this.callbacks.receive.filter(o=>o!==n):e in this.callbacks&&(this.callbacks[e]=null),this}static isSupported(){return"serial"in navigator}async connect(e={baudRate:115200}){try{return this.port=await navigator.serial.requestPort(),await this.port.open(e),this.isConnected=!0,this._triggerStateChange(),this._startReading(),!0}catch(n){return this._handleError(n),!1}}async disconnect(){try{return this.reader&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close(),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close(),this.port=null),this.isConnected=!1,this._triggerStateChange(),!0}catch(e){throw new Error("Disconnect failed with error: "+e.message)}}clearBuffer(){this.receiveBuffer=new Uint8Array,this.readPointer=0}async sendRawData(e){if(!this.isConnected)return!1;try{return this.writer=this.port.writable.getWriter(),await this.writer.write(e),!0}catch(n){return this._handleError(n),!1}finally{this.writer&&(this.writer.releaseLock(),this.writer=null)}}async sendHex(e){return this.sendRawData(L(e))}async sendText(e){return this.sendRawData(new TextEncoder().encode(e))}async validateDevice({queryCommand:e,response:n,timeout:o=1e3}){if(!this.isConnected)throw new Error("Device not connected");const r=this.receiveBuffer.length;return new Promise(s=>{const l=setTimeout(()=>{this.off("receive",i),s({result:!1,reason:"Timeout"})},o),i=()=>{const a=this.receiveBuffer.slice(r);ie(a,n)&&(clearTimeout(l),this.off("receive",i),s({result:!0}))};this.on("receive",i),this.sendRawData(e)})}async _startReading(){try{for(this.reader=this.port.readable.getReader();;){const{value:e,done:n}=await this.reader.read();if(n)break;this.receiveBuffer=new Uint8Array([...this.receiveBuffer,...e]);const o=this.receiveBuffer.slice(this.readPointer);this.callbacks.receive.forEach(r=>r(o)),this.readPointer=this.receiveBuffer.length}}catch(e){this._handleError(e)}finally{this.reader.releaseLock()}}_triggerStateChange(){this.callbacks.stateChange&&this.callbacks.stateChange(this.isConnected)}async _handleError(e){console.error("SerialManager Error:",e),this.callbacks.error&&this.callbacks.error({type:"serial",message:e.message,stack:e.stack});try{await this.disconnect()}catch(n){console.error("Disconnect Error:",n),alert("Connection error, please refresh the page and try again.")}}}const Se=W("serialData",()=>{const t=g(new ce),e=g(null),n=g(null),o=g(!1),r=()=>{t.value.on("receive",l).on("error",a=>{a.value=a,console.log("err",a)})},s=async a=>(t.value.clearBuffer(),t.value.sendHex(a)),l=a=>{e.value=a};return{manager:t,receiveData:e,err:n,isConnected:o,setIsConnected:a=>{o.value=a},init:r,sendHex:s}}),ue={Horn:{separator:!0,value:1,hasFunction:!0,hasColor:!1},L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS2:{separator:!1,value:33,hasFunction:!0,hasColor:!1},RS1:{separator:!1,value:40,hasFunction:!0,hasColor:!1},RS2:{separator:!1,value:41,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Le=ue,_e={L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},L5:{separator:!1,value:20,hasFunction:!0,hasColor:!0},L6:{separator:!1,value:21,hasFunction:!1,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},R5:{separator:!1,value:28,hasFunction:!0,hasColor:!0},R6:{separator:!1,value:29,hasFunction:!1,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS_CW:{separator:!0,value:36,hasFunction:!0,hasColor:!1},LS_CCW:{separator:!1,value:37,hasFunction:!0,hasColor:!1},RS1:{separator:!0,value:40,hasFunction:!0,hasColor:!1},RS_CW:{separator:!0,value:44,hasFunction:!0,hasColor:!1},RS_CCW:{separator:!1,value:45,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Ge={separator:!0,value:1,hasFunction:!0,hasColor:!1};class v{constructor(e){this.buffer=e,this.buttons={Horn:{inputIndex:e[24],bufferIndex:24},L1:{inputIndex:e[25],bufferIndex:25,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[26],bufferIndex:26,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[27],bufferIndex:27,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[28],bufferIndex:28,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},R1:{inputIndex:e[29],bufferIndex:29,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},R2:{inputIndex:e[30],bufferIndex:30,colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R3:{inputIndex:e[31],bufferIndex:31,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R4:{inputIndex:e[32],bufferIndex:32,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},LS1:{inputIndex:e[33],bufferIndex:33},LS2:{inputIndex:e[34],bufferIndex:34},RS1:{inputIndex:e[35],bufferIndex:35},RS2:{inputIndex:e[36],bufferIndex:36},LJoystick_UP:{inputIndex:e[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:e[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:e[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:e[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:e[41],bufferIndex:41},LJoystick_CW:{inputIndex:e[42],bufferIndex:42},LJoystick_CCW:{inputIndex:e[43],bufferIndex:43},RJoystick_UP:{inputIndex:e[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:e[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:e[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:e[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:e[48],bufferIndex:48},RJoystick_CW:{inputIndex:e[49],bufferIndex:49},RJoystick_CCW:{inputIndex:e[50],bufferIndex:50}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,n=null,o=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(n===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(n&&(r.inputIndex=n,this.buffer[r.bufferIndex]=n),o){const s=R(o);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const n=[];for(let o=0;o<e.length;o+=51){const r=e.slice(o,o+51);n.push(new v(r))}return n}}class de{constructor(e){this.buffer=e,this.buttons={Horn:{inputIndex:e[24],bufferIndex:24},L1:{inputIndex:e[25],bufferIndex:25,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[26],bufferIndex:26,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[27],bufferIndex:27,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[28],bufferIndex:28,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},R1:{inputIndex:e[29],bufferIndex:29,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},R2:{inputIndex:e[30],bufferIndex:30,colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R3:{inputIndex:e[31],bufferIndex:31,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R4:{inputIndex:e[32],bufferIndex:32,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},LS1:{inputIndex:e[33],bufferIndex:33},LS2:{inputIndex:e[34],bufferIndex:34},RS1:{inputIndex:e[35],bufferIndex:35},RS2:{inputIndex:e[36],bufferIndex:36},LJoystick_UP:{inputIndex:e[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:e[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:e[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:e[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:e[41],bufferIndex:41},LJoystick_CW:{inputIndex:e[42],bufferIndex:42},LJoystick_CCW:{inputIndex:e[43],bufferIndex:43},RJoystick_UP:{inputIndex:e[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:e[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:e[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:e[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:e[48],bufferIndex:48},RJoystick_CW:{inputIndex:e[49],bufferIndex:49},RJoystick_CCW:{inputIndex:e[50],bufferIndex:50}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,n=null,o=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(n===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(n&&(r.inputIndex=n,this.buffer[r.bufferIndex]=n),o){const s=R(o);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const n=[];for(let o=0;o<e.length;o+=51){const r=e.slice(o,o+51);n.push(new v(r))}return n}}class he{constructor(e){this.buffer=e,this.buttons={L1:{inputIndex:e[36],bufferIndex:36,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[37],bufferIndex:37,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[38],bufferIndex:38,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[39],bufferIndex:39,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},L5:{inputIndex:e[40],bufferIndex:40,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},L6:{colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R1:{inputIndex:e[41],bufferIndex:41,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R2:{inputIndex:e[42],bufferIndex:42,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},R3:{inputIndex:e[43],bufferIndex:43,colorR:e[24],colorRIndex:24,colorG:e[25],colorGIndex:25,colorB:e[26],colorBIndex:26},R4:{inputIndex:e[44],bufferIndex:44,colorR:e[27],colorRIndex:27,colorG:e[28],colorGIndex:28,colorB:e[29],colorBIndex:29},R5:{inputIndex:e[45],bufferIndex:45,colorR:e[30],colorRIndex:30,colorG:e[31],colorGIndex:31,colorB:e[32],colorBIndex:32},R6:{colorR:e[33],colorRIndex:33,colorG:e[34],colorGIndex:34,colorB:e[35],colorBIndex:35},LS1:{inputIndex:e[46],bufferIndex:46},LS_CW:{inputIndex:e[47],bufferIndex:47},LS_CCW:{inputIndex:e[48],bufferIndex:48},RS1:{inputIndex:e[49],bufferIndex:49},RS_CW:{inputIndex:e[50],bufferIndex:50},RS_CCW:{inputIndex:e[51],bufferIndex:51},LJoystick_UP:{inputIndex:e[52],bufferIndex:52},LJoystick_DOWN:{inputIndex:e[53],bufferIndex:53},LJoystick_LEFT:{inputIndex:e[54],bufferIndex:54},LJoystick_RIGHT:{inputIndex:e[55],bufferIndex:55},LJoystick_CENTER:{inputIndex:e[56],bufferIndex:56},LJoystick_CW:{inputIndex:e[57],bufferIndex:57},LJoystick_CCW:{inputIndex:e[58],bufferIndex:58},RJoystick_UP:{inputIndex:e[59],bufferIndex:59},RJoystick_DOWN:{inputIndex:e[60],bufferIndex:60},RJoystick_LEFT:{inputIndex:e[61],bufferIndex:61},RJoystick_RIGHT:{inputIndex:e[62],bufferIndex:62},RJoystick_CENTER:{inputIndex:e[63],bufferIndex:63},RJoystick_CW:{inputIndex:e[64],bufferIndex:64},RJoystick_CCW:{inputIndex:e[65],bufferIndex:65}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,n=null,o=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(n===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(n&&(r.inputIndex=n,this.buffer[r.bufferIndex]=n),o){const s=R(o);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const n=[];for(let o=0;o<e.length;o+=51){const r=e.slice(o,o+51);n.push(new v(r))}return n}}const xe={PRO:{label:"PRO",value:1},AIR:{label:"AIR",value:2},GT:{label:"GT",value:3}},be=W("hubConfig",{state:()=>({isAvailable:!1,modelByte:0,lastBridgeConnCarVendorByte:0,majorVersionByte:0,minorVersionByte:0,patchVersionByte:0,profileByte:0,buttonDayBrightness:0,buttonNightBrightness:0,rpmDayBrightness:0,rpmNightBrightness:0,rpmPatternByte:0,rpmStage1ColorR:0,rpmStage1ColorG:0,rpmStage1ColorB:0,rpmStage2ColorR:0,rpmStage2ColorG:0,rpmStage2ColorB:0,rpmStage3ColorR:0,rpmStage3ColorG:0,rpmStage3ColorB:0,rpmRedlineColorR:0,rpmRedlineColorG:0,rpmRedlineColorB:0,buttonConfig:null}),actions:{setIsAvailable(t){this.isAvailable=t},setInfo(t){if(!(t instanceof Uint8Array)){console.error("infoArray is not Uint8Array");return}this.modelByte=t[0],this.lastBridgeConnCarVendorByte=t[1],this.majorVersionByte=t[2]>>4,this.minorVersionByte=t[2]&15,this.patchVersionByte=t[3]},setProfile(t){if(!(t instanceof Uint8Array)){console.error("profileArray is not Uint8Array");return}this.profileByte=t[0]},setBrightness(t){if(!(t instanceof Uint8Array)){console.error("brightnessArray is not Uint8Array");return}this.buttonDayBrightness=Math.min(t[0],100),this.buttonNightBrightness=Math.min(t[1],100),this.rpmDayBrightness=Math.min(t[2],100),this.rpmNightBrightness=Math.min(t[3],100)},setAllButtonConfig(t){if(!(t instanceof Uint8Array)){console.error("buttonConfigArray is not Uint8Array");return}switch(le(xe,this.modelByte).label){case"PRO":this.buttonConfig=new v(t);break;case"AIR":this.buttonConfig=new de(t);break;case"GT":this.buttonConfig=new he(t);break}this.isAvailable=!0},setRpmConfig(t){if(!(t instanceof Uint8Array)){console.error("rpmArray is not Uint8Array");return}this.rpmPatternByte=t[0],this.rpmStage1ColorR=Math.min(Math.round(t[1]*2.55),255),this.rpmStage1ColorG=Math.min(Math.round(t[2]*2.55),255),this.rpmStage1ColorB=Math.min(Math.round(t[3]*2.55),255),this.rpmStage2ColorR=Math.min(Math.round(t[4]*2.55),255),this.rpmStage2ColorG=Math.min(Math.round(t[5]*2.55),255),this.rpmStage2ColorB=Math.min(Math.round(t[6]*2.55),255),this.rpmStage3ColorR=Math.min(Math.round(t[7]*2.55),255),this.rpmStage3ColorG=Math.min(Math.round(t[8]*2.55),255),this.rpmStage3ColorB=Math.min(Math.round(t[9]*2.55),255),this.rpmRedlineColorR=Math.min(Math.round(t[10]*2.55),255),this.rpmRedlineColorG=Math.min(Math.round(t[11]*2.55),255),this.rpmRedlineColorB=Math.min(Math.round(t[12]*2.55),255)}},getters:{}});var C;const c=class c{static verify(e){if(!(e instanceof Uint8Array))throw new Error("Frame must be a Uint8Array");const n=L(m(c,C));if(e[0]!==n[0]||e[1]!==n[1])throw new Error("Invalid frame header");const o=e.slice(0,-1);if(M(o)!==e[e.length-1])throw new Error("Invalid checksum");return{cmd:e[2],data:e.slice(5,-1)}}static generateFrame(e,n){const o=L(m(c,C)),r=n.length,s=new Uint8Array(6+r);s[0]=o[0],s[1]=o[1],s[2]=e,s[3]=r>>8&255,s[4]=r&255,s.set(n,5);const l=M(s.slice(0,-1));return s[s.length-1]=l,s}static generateValidateFrame(e){if(!Object.hasOwn(c.SOURCE_BYTE,e))throw new Error("Invalid source byte");const n=c.SOURCE_BYTE[e],o={type:c.TLV_TYPE.SOURCE,length:1,value:new Uint8Array([n])},{buffer:r}=p([o]);return this.generateFrame(c.CMD_BYTE.VALIDATE,r)}static generateFetchInfoFrame(){const e=[{type:c.CONFIG_BYTE.INFO,length:0,value:null},{type:c.CONFIG_BYTE.PROFILE,length:0,value:null},{type:c.CONFIG_BYTE.BRIGHTNESS,length:0,value:null},{type:c.CONFIG_BYTE.BUTTON,length:0,value:null},{type:c.CONFIG_BYTE.RPM,length:0,value:null}],{buffer:n}=p(e);return this.generateFrame(c.CMD_BYTE.GET_CONFIG,n)}static generateSetProfileFrame(e){const n=[{type:c.CONFIG_BYTE.PROFILE,length:1,value:new Uint8Array([e])}],{buffer:o}=p(n);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,o)}static generateSetBrightnessFrame(e=null,n=null){let o=255;n===null||n>100?o=100:o=n;const r=[{type:c.CONFIG_BYTE.BRIGHTNESS,length:2,value:new Uint8Array([e,o])}],{buffer:s}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,s)}static generateSetButtonDayBrightnessFrame(e=null){return this.generateSetBrightnessFrame(1,e)}static generateSetButtonNightBrightnessFrame(e=null){return this.generateSetBrightnessFrame(2,e)}static generateSetRpmDayBrightnessFrame(e=null){return this.generateSetBrightnessFrame(4,e)}static generateSetRpmNightBrightnessFrame(e=null){return this.generateSetBrightnessFrame(8,e)}static generateEnableBrightnessFrame(e,n){let o=0;e===0&&(o|=1),n===0&&(o|=2);const r=[{type:c.CONFIG_BYTE.ENABLE_BRIGHTNESS,length:1,value:new Uint8Array([o])}],{buffer:s}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,s)}static generateEnableDayBrightnessFrame(e){return this.generateEnableBrightnessFrame(1,e)}static generateEnableNightBrightnessFrame(e){return this.generateEnableBrightnessFrame(0,e)}static generateSetButtonFrame(e,n,o=null,r=null){if(e===null)throw new Error("buttonByte cannot be null");if(n===null)throw new Error("profileByte cannot be null");if(o===null&&r===null)throw new Error("func and rgb cannot be null at the same time");let s=0,l=255,i=255,a=255,u=255;if(o!==null&&(s|=1,l=o),r!==null){s|=2;const I=R(r);i=I.r,a=I.g,u=I.b}const d=[{type:c.CONFIG_BYTE.BUTTON,length:7,value:new Uint8Array([e,n,s&255,l,i,a,u])}],{buffer:h}=p(d);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,h)}static generateSetRpmFrame(e,n,o=null){if(e===null&&n===null)throw new Error("patternByte and stageByte cannot be null at the same time");let r=0,s=255,l=255,i=255;if(e!==null)r=1;else if(n!==null&&(r=2,o!==null)){const d=R(o);s=d.r,l=d.g,i=d.b}const a=[{type:c.CONFIG_BYTE.RPM,length:6,value:new Uint8Array([r,e,n,s,l,i])}],{buffer:u}=p(a);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,u)}static generateSetRpmPatternFrame(e){return this.generateSetRpmFrame(e,null,null)}static generateSetRpmStage1Color(e){return this.generateSetRpmFrame(null,0,e)}static generateSetRpmStage2Color(e){return this.generateSetRpmFrame(null,1,e)}static generateSetRpmStage3Color(e){return this.generateSetRpmFrame(null,2,e)}static generateSetRpmRedlineColor(e){return this.generateSetRpmFrame(null,3,e)}};C=new WeakMap,b(c,C,"5043"),f(c,"CMD_BYTE",{VALIDATE:0,GET_CONFIG:2,SET_CONFIG:3}),f(c,"TLV_TYPE",{SOURCE:1,CONFIG:2}),f(c,"SOURCE_BYTE",{OK:0,WEBSITE:1,APP:2,EXIT:250,FACTORY:252,FAIL:255}),f(c,"CONFIG_BYTE",{INFO:0,PROFILE:1,BRIGHTNESS:2,BUTTON:3,ENABLE_BRIGHTNESS:4,RPM:5});let P=c;const ke=(t,e)=>{const n=t.__vccOpts||t;for(const[o,r]of e)n[o]=r;return n};export{Le as A,Ge as D,_e as G,xe as H,ue as P,ge as Q,Fe as R,P as U,ke as _,ye as a,be as b,me as c,Ee as d,Re as e,V as f,ve as g,Y as h,Be as i,we as j,oe as k,se as l,R as m,le as n,Ce as s,Te as t,Se as u};
