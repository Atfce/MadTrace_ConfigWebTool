var K=Object.defineProperty;var J=r=>{throw TypeError(r)};var Z=(r,t,e)=>t in r?K(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var m=(r,t,e)=>Z(r,typeof t!="symbol"?t+"":t,e),tt=(r,t,e)=>t.has(r)||J("Cannot "+e);var v=(r,t,e)=>(tt(r,t,"read from private field"),e?e.call(r):t.get(r)),N=(r,t,e)=>t.has(r)?J("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import{r as R,j as et,q as w,c as H,g as Y,o as S,a7 as V,s as L,h as nt,ag as G,aH as ot,aI as O,w as D,i as rt,aJ as st}from"./index-Cfy3MZ_G.js";import{d as z}from"./pinia-oPjGGT6L.js";function it(){const r=R(!et.value);return r.value===!1&&w(()=>{r.value=!0}),{isHydrated:r}}const j=typeof ResizeObserver<"u",P=j===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},Rt=H({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(r,{emit:t}){let e=null,n,o={width:-1,height:-1};function s(i){i===!0||r.debounce===0||r.debounce==="0"?a():e===null&&(e=setTimeout(a,r.debounce))}function a(){if(e!==null&&(clearTimeout(e),e=null),n){const{offsetWidth:i,offsetHeight:c}=n;(i!==o.width||c!==o.height)&&(o={width:i,height:c},t("resize",o))}}const{proxy:l}=Y();if(l.trigger=s,j===!0){let i;const c=h=>{n=l.$el.parentNode,n?(i=new ResizeObserver(s),i.observe(n),a()):h!==!0&&L(()=>{c(!0)})};return w(()=>{c()}),S(()=>{e!==null&&clearTimeout(e),i!==void 0&&(i.disconnect!==void 0?i.disconnect():n&&i.unobserve(n))}),V}else{let i=function(){e!==null&&(clearTimeout(e),e=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",s,G.passive),d=void 0)},c=function(){i(),n&&n.contentDocument&&(d=n.contentDocument.defaultView,d.addEventListener("resize",s,G.passive),a())};const{isHydrated:h}=it();let d;return w(()=>{L(()=>{n=l.$el,n&&c()})}),S(i),()=>{if(h.value===!0)return nt("object",{class:"q--avoid-card-border",style:P.style,tabindex:-1,type:"text/html",data:P.url,"aria-hidden":"true",onLoad:c})}}}}),at=[Element,String],lt=[null,document,document.body,document.scrollingElement,document.documentElement];function ut(r,t){let e=ot(t);if(e===void 0){if(r==null)return window;e=r.closest(".scroll,.scroll-y,.overflow-auto")}return lt.includes(e)?window:e}function X(r){return r===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:r.scrollTop}function q(r){return r===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:r.scrollLeft}function $(r,t,e=0){const n=arguments[3]===void 0?performance.now():arguments[3],o=X(r);if(e<=0){o!==t&&_(r,t);return}requestAnimationFrame(s=>{const a=s-n,l=o+(t-o)/Math.max(a,e)*a;_(r,l),l!==t&&$(r,t,e-a,s)})}function Q(r,t,e=0){const n=arguments[3]===void 0?performance.now():arguments[3],o=q(r);if(e<=0){o!==t&&T(r,t);return}requestAnimationFrame(s=>{const a=s-n,l=o+(t-o)/Math.max(a,e)*a;T(r,l),l!==t&&Q(r,t,e-a,s)})}function _(r,t){if(r===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}r.scrollTop=t}function T(r,t){if(r===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}r.scrollLeft=t}function ft(r,t,e){if(e){$(r,t,e);return}_(r,t)}function Ct(r,t,e){if(e){Q(r,t,e);return}T(r,t)}let b;function Bt(){if(b!==void 0)return b;const r=document.createElement("p"),t=document.createElement("div");O(r,{width:"100%",height:"200px"}),O(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(r),document.body.appendChild(t);const e=r.offsetWidth;t.style.overflow="scroll";let n=r.offsetWidth;return e===n&&(n=t.clientWidth),t.remove(),b=e-n,b}function Mt(r,t=!0){return!r||r.nodeType!==Node.ELEMENT_NODE?!1:t?r.scrollHeight>r.clientHeight&&(r.classList.contains("scroll")||r.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(r)["overflow-y"])):r.scrollWidth>r.clientWidth&&(r.classList.contains("scroll")||r.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(r)["overflow-x"]))}const{passive:U}=G,ct=["both","horizontal","vertical"],bt=H({name:"QScrollObserver",props:{axis:{type:String,validator:r=>ct.includes(r),default:"vertical"},debounce:[String,Number],scrollTarget:at},emits:["scroll"],setup(r,{emit:t}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,o,s;D(()=>r.scrollTarget,()=>{i(),l()});function a(){n!==null&&n();const d=Math.max(0,X(o)),I=q(o),x={top:d-e.position.top,left:I-e.position.left};if(r.axis==="vertical"&&x.top===0||r.axis==="horizontal"&&x.left===0)return;const k=Math.abs(x.top)>=Math.abs(x.left)?x.top<0?"up":"down":x.left<0?"left":"right";e.position={top:d,left:I},e.directionChanged=e.direction!==k,e.delta=x,e.directionChanged===!0&&(e.direction=k,e.inflectionPoint=e.position),t("scroll",{...e})}function l(){o=ut(s,r.scrollTarget),o.addEventListener("scroll",c,U),c(!0)}function i(){o!==void 0&&(o.removeEventListener("scroll",c,U),o=void 0)}function c(d){if(d===!0||r.debounce===0||r.debounce==="0")a();else if(n===null){const[I,x]=r.debounce?[setTimeout(a,r.debounce),clearTimeout]:[requestAnimationFrame(a),cancelAnimationFrame];n=()=>{x(I),n=null}}}const{proxy:h}=Y();return D(()=>h.$q.lang.rtl,a),w(()=>{s=h.$el.parentNode,l()}),S(()=>{n!==null&&n(),i()}),Object.assign(h,{trigger:c,getPosition:()=>e}),V}});function yt(){return rt(st)}const wt=async(r,t)=>{await L(),await ht(50);const e=r.value[t]?.$el;e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},ht=r=>new Promise(t=>setTimeout(t,r));function E(r,t){const e=Object.values(r).find(n=>n.value===t);return e||null}const F=r=>{if(typeof r!="string")throw new Error("Input must be a string");if(r.length%2!==0)throw new Error("Input must have an even number of characters");const t=new Uint8Array(r.length/2);for(let e=0;e<r.length;e+=2){const n=parseInt(r.substring(e,e+2),16);if(isNaN(n))throw new Error(`Invalid hex character at position ${e}: ${r.substring(e,e+2)}`);t[e/2]=n}return t},p=r=>{r=r.replace("#","");const t=parseInt(r.substring(0,2),16),e=parseInt(r.substring(2,4),16),n=parseInt(r.substring(4,6),16);return{r:t,g:e,b:n}},vt=(r,t,e)=>"#"+((r<<16)+(t<<8)+e).toString(16).padStart(6,"0"),dt=(r,t)=>{if(!(r instanceof Uint8Array)||!(t instanceof Uint8Array))throw new Error("Both source and target must be Uint8Array");for(let e=0;e<=r.length-t.length;e++)if(t.every((n,o)=>r[e+o]===n))return!0;return!1},W=r=>r.reduce((t,e)=>t+e,0)&255,g=r=>{const t=[];let e=0;for(const s of r){const{type:a,length:l,value:i}=s;if(a<0||a>255)throw new Error("Type must be between 0 and 255");if(l<0||l>255)throw new Error("itemLength must be between 0 and 255");if(l>0){if(i.length!==l)throw new Error("Value length does not match specified length");if(!(i instanceof Uint8Array))throw new Error("Value must be a Uint8Array")}const c=new Uint8Array(2+l);c[0]=a,c[1]=l,l>0&&c.set(i,2),t.push(c),e+=c.length}const n=new Uint8Array(e);let o=0;for(const s of t)n.set(s,o),o+=s.length;return{length:e,buffer:n}},Et=r=>{if(!(r instanceof Uint8Array))throw new Error("Input must be a Uint8Array");const t=[];let e=0;for(;e<r.length;){const n=r[e++];if(e>=r.length)throw new Error("Unexpected end of buffer");let o=r[e++];if(o<0||o>255)throw new Error("Length must be between 0 and 255");if(e+o>r.length)throw new Error("Unexpected end of buffer");const s=r.slice(e,e+o);t.push({type:n,length:o,value:s}),e+=o}if(e!==r.length)throw new Error("Not all data was consumed");return t};class pt{constructor(){this.port=null,this.reader=null,this.writer=null,this.readPointer=0,this.isConnected=!1,this.receiveBuffer=new Uint8Array,this.callbacks={receive:[],error:null,stateChange:null}}on(t,e){return t==="receive"?this.callbacks.receive.push(e):t in this.callbacks&&(this.callbacks[t]=e),this}off(t,e){return t==="receive"?this.callbacks.receive=this.callbacks.receive.filter(n=>n!==e):t in this.callbacks&&(this.callbacks[t]=null),this}static isSupported(){return"serial"in navigator}async connect(t={baudRate:115200}){try{return this.port=await navigator.serial.requestPort(),await this.port.open(t),this.isConnected=!0,this.writer=this.port.writable.getWriter(),this._triggerStateChange(),this._startReading(),!0}catch(e){return this._handleError(e),!1}}async disconnect(){try{return this.reader&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close(),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close(),this.port=null),this.isConnected=!1,this._triggerStateChange(),!0}catch(t){throw new Error("Disconnect failed with error: "+t.message)}}clearBuffer(){this.receiveBuffer=new Uint8Array,this.readPointer=0}async sendRawData(t){if(!this.isConnected||!this.writer)return!1;if(t==null)throw new Error("Data cannot be null or undefined");if(!(t instanceof Uint8Array))throw new Error("Data must be a Uint8Array");try{return await this.writer.write(t),!0}catch(e){return this._handleError(e),!1}}async sendHex(t){return this.sendRawData(F(t))}async sendText(t){return this.sendRawData(new TextEncoder().encode(t))}async validateDevice({queryCommand:t,response:e,timeout:n=1e3}){if(!this.isConnected)throw new Error("Device not connected");const o=this.receiveBuffer.length;return new Promise(s=>{const a=setTimeout(()=>{this.off("receive",l),s({result:!1,reason:"Timeout"})},n),l=()=>{const i=this.receiveBuffer.slice(o);dt(i,e)&&(clearTimeout(a),this.off("receive",l),s({result:!0}))};this.on("receive",l),this.sendRawData(t)})}async _startReading(){try{for(this.reader=this.port.readable.getReader();;){const{value:t,done:e}=await this.reader.read();if(e)break;this.receiveBuffer=new Uint8Array([...this.receiveBuffer,...t]);const n=this.receiveBuffer.slice(this.readPointer);this.callbacks.receive.forEach(o=>o(n)),this.readPointer=this.receiveBuffer.length}}catch(t){this._handleError(t)}finally{this.reader.releaseLock()}}_triggerStateChange(){this.callbacks.stateChange&&this.callbacks.stateChange(this.isConnected)}async _handleError(t){console.error("SerialManager Error:",t),this.callbacks.error&&this.callbacks.error({type:"serial",message:t.message,stack:t.stack});try{await this.disconnect()}catch(e){console.error("Disconnect Error:",e),alert("Connection error, please refresh the page and replug the device.")}}}const St=z("serialData",()=>{const r=R(new pt),t=R(null),e=R(null),n=R(!1),o=()=>{r.value.on("receive",a).on("error",i=>{i.value=i,console.log("err",i)})},s=async i=>(r.value.clearBuffer(),r.value.sendHex(i)),a=i=>{t.value=i};return{manager:r,receiveData:t,err:e,isConnected:n,setIsConnected:i=>{n.value=i},init:o,sendHex:s}}),xt={Horn:{separator:!0,value:1,hasFunction:!0,hasColor:!1},L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS2:{separator:!1,value:33,hasFunction:!0,hasColor:!1},RS1:{separator:!1,value:40,hasFunction:!0,hasColor:!1},RS2:{separator:!1,value:41,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Lt=xt,Gt={L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},L5:{separator:!1,value:20,hasFunction:!0,hasColor:!0},L6:{separator:!1,value:21,hasFunction:!1,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},R5:{separator:!1,value:28,hasFunction:!0,hasColor:!0},R6:{separator:!1,value:29,hasFunction:!1,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS_CW:{separator:!0,value:36,hasFunction:!0,hasColor:!1},LS_CCW:{separator:!1,value:37,hasFunction:!0,hasColor:!1},RS1:{separator:!0,value:40,hasFunction:!0,hasColor:!1},RS_CW:{separator:!0,value:44,hasFunction:!0,hasColor:!1},RS_CCW:{separator:!1,value:45,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},_t={label:"None",separator:!0,value:1,hasFunction:!0,hasColor:!1};class f{constructor(t){this.buffer=t,this.buttons={Horn:{inputIndex:t[24],bufferIndex:24},L1:{inputIndex:t[25],bufferIndex:25,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[26],bufferIndex:26,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[27],bufferIndex:27,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[28],bufferIndex:28,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},R1:{inputIndex:t[29],bufferIndex:29,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},R2:{inputIndex:t[30],bufferIndex:30,colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R3:{inputIndex:t[31],bufferIndex:31,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R4:{inputIndex:t[32],bufferIndex:32,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},LS1:{inputIndex:t[33],bufferIndex:33},LS2:{inputIndex:t[34],bufferIndex:34},RS1:{inputIndex:t[35],bufferIndex:35},RS2:{inputIndex:t[36],bufferIndex:36},LJoystick_UP:{inputIndex:t[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:t[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:t[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:t[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:t[41],bufferIndex:41},LJoystick_CW:{inputIndex:t[42],bufferIndex:42},LJoystick_CCW:{inputIndex:t[43],bufferIndex:43},RJoystick_UP:{inputIndex:t[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:t[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:t[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:t[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:t[48],bufferIndex:48},RJoystick_CW:{inputIndex:t[49],bufferIndex:49},RJoystick_CCW:{inputIndex:t[50],bufferIndex:50}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,e=null,n=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(e===null&&n===null)throw new Error("Invalid input index and color RGB");const o=this.buttons[t];if(e&&(o.inputIndex=e,this.buffer[o.bufferIndex]=e),n){const s=p(n);o.colorR=s.r,o.colorG=s.g,o.colorB=s.b,this.buffer[o.colorRIndex]=s.r,this.buffer[o.colorGIndex]=s.g,this.buffer[o.colorBIndex]=s.b}}static parseRawData(t){if(t.length%51!==0)throw new Error("Invalid raw data length:"+t.length);const e=[];for(let n=0;n<t.length;n+=51){const o=t.slice(n,n+51);e.push(new f(o))}return e}static serialize(t){const e=new Uint8Array(t.length*51);for(let n=0;n<t.length;n++){const o=t[n];e[n*51+0]=Math.round(o.buttons.L1.colorR/2.55),e[n*51+1]=Math.round(o.buttons.L1.colorG/2.55),e[n*51+2]=Math.round(o.buttons.L1.colorB/2.55),e[n*51+3]=Math.round(o.buttons.L2.colorR/2.55),e[n*51+4]=Math.round(o.buttons.L2.colorG/2.55),e[n*51+5]=Math.round(o.buttons.L2.colorB/2.55),e[n*51+6]=Math.round(o.buttons.L3.colorR/2.55),e[n*51+7]=Math.round(o.buttons.L3.colorG/2.55),e[n*51+8]=Math.round(o.buttons.L3.colorB/2.55),e[n*51+9]=Math.round(o.buttons.L4.colorR/2.55),e[n*51+10]=Math.round(o.buttons.L4.colorG/2.55),e[n*51+11]=Math.round(o.buttons.L4.colorB/2.55),e[n*51+12]=Math.round(o.buttons.R1.colorR/2.55),e[n*51+13]=Math.round(o.buttons.R1.colorG/2.55),e[n*51+14]=Math.round(o.buttons.R1.colorB/2.55),e[n*51+15]=Math.round(o.buttons.R2.colorR/2.55),e[n*51+16]=Math.round(o.buttons.R2.colorG/2.55),e[n*51+17]=Math.round(o.buttons.R2.colorB/2.55),e[n*51+18]=Math.round(o.buttons.R3.colorR/2.55),e[n*51+19]=Math.round(o.buttons.R3.colorG/2.55),e[n*51+20]=Math.round(o.buttons.R3.colorB/2.55),e[n*51+21]=Math.round(o.buttons.R4.colorR/2.55),e[n*51+22]=Math.round(o.buttons.R4.colorG/2.55),e[n*51+23]=Math.round(o.buttons.R4.colorB/2.55),e[n*51+24]=o.buttons.Horn.inputIndex,e[n*51+25]=o.buttons.L1.inputIndex,e[n*51+26]=o.buttons.L2.inputIndex,e[n*51+27]=o.buttons.L3.inputIndex,e[n*51+28]=o.buttons.L4.inputIndex,e[n*51+29]=o.buttons.R1.inputIndex,e[n*51+30]=o.buttons.R2.inputIndex,e[n*51+31]=o.buttons.R3.inputIndex,e[n*51+32]=o.buttons.R4.inputIndex,e[n*51+33]=o.buttons.LS1.inputIndex,e[n*51+34]=o.buttons.LS2.inputIndex,e[n*51+35]=o.buttons.RS1.inputIndex,e[n*51+36]=o.buttons.RS2.inputIndex,e[n*51+37]=o.buttons.LJoystick_UP.inputIndex,e[n*51+38]=o.buttons.LJoystick_DOWN.inputIndex,e[n*51+39]=o.buttons.LJoystick_LEFT.inputIndex,e[n*51+40]=o.buttons.LJoystick_RIGHT.inputIndex,e[n*51+41]=o.buttons.LJoystick_CENTER.inputIndex,e[n*51+42]=o.buttons.LJoystick_CW.inputIndex,e[n*51+43]=o.buttons.LJoystick_CCW.inputIndex,e[n*51+44]=o.buttons.RJoystick_UP.inputIndex,e[n*51+45]=o.buttons.RJoystick_DOWN.inputIndex,e[n*51+46]=o.buttons.RJoystick_LEFT.inputIndex,e[n*51+47]=o.buttons.RJoystick_RIGHT.inputIndex,e[n*51+48]=o.buttons.RJoystick_CENTER.inputIndex,e[n*51+49]=o.buttons.RJoystick_CW.inputIndex,e[n*51+50]=o.buttons.RJoystick_CCW.inputIndex}return e}}class C{constructor(t){this.buffer=t,this.buttons={Horn:{inputIndex:t[24],bufferIndex:24},L1:{inputIndex:t[25],bufferIndex:25,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[26],bufferIndex:26,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[27],bufferIndex:27,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[28],bufferIndex:28,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},R1:{inputIndex:t[29],bufferIndex:29,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},R2:{inputIndex:t[30],bufferIndex:30,colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R3:{inputIndex:t[31],bufferIndex:31,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R4:{inputIndex:t[32],bufferIndex:32,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},LS1:{inputIndex:t[33],bufferIndex:33},LS2:{inputIndex:t[34],bufferIndex:34},RS1:{inputIndex:t[35],bufferIndex:35},RS2:{inputIndex:t[36],bufferIndex:36},LJoystick_UP:{inputIndex:t[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:t[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:t[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:t[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:t[41],bufferIndex:41},LJoystick_CW:{inputIndex:t[42],bufferIndex:42},LJoystick_CCW:{inputIndex:t[43],bufferIndex:43},RJoystick_UP:{inputIndex:t[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:t[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:t[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:t[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:t[48],bufferIndex:48},RJoystick_CW:{inputIndex:t[49],bufferIndex:49},RJoystick_CCW:{inputIndex:t[50],bufferIndex:50}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,e=null,n=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(e===null&&n===null)throw new Error("Invalid input index and color RGB");const o=this.buttons[t];if(e&&(o.inputIndex=e,this.buffer[o.bufferIndex]=e),n){const s=p(n);o.colorR=s.r,o.colorG=s.g,o.colorB=s.b,this.buffer[o.colorRIndex]=s.r,this.buffer[o.colorGIndex]=s.g,this.buffer[o.colorBIndex]=s.b}}static parseRawData(t){if(t.length%51!==0)throw new Error("Invalid raw data length:"+t.length);const e=[];for(let n=0;n<t.length;n+=51){const o=t.slice(n,n+51);e.push(new C(o))}return e}static serialize(t){const e=new Uint8Array(t.length*51);for(let n=0;n<t.length;n++){const o=t[n];e[n*51+0]=Math.round(o.buttons.L1.colorR/2.55),e[n*51+1]=Math.round(o.buttons.L1.colorG/2.55),e[n*51+2]=Math.round(o.buttons.L1.colorB/2.55),e[n*51+3]=Math.round(o.buttons.L2.colorR/2.55),e[n*51+4]=Math.round(o.buttons.L2.colorG/2.55),e[n*51+5]=Math.round(o.buttons.L2.colorB/2.55),e[n*51+6]=Math.round(o.buttons.L3.colorR/2.55),e[n*51+7]=Math.round(o.buttons.L3.colorG/2.55),e[n*51+8]=Math.round(o.buttons.L3.colorB/2.55),e[n*51+9]=Math.round(o.buttons.L4.colorR/2.55),e[n*51+10]=Math.round(o.buttons.L4.colorG/2.55),e[n*51+11]=Math.round(o.buttons.L4.colorB/2.55),e[n*51+12]=Math.round(o.buttons.R1.colorR/2.55),e[n*51+13]=Math.round(o.buttons.R1.colorG/2.55),e[n*51+14]=Math.round(o.buttons.R1.colorB/2.55),e[n*51+15]=Math.round(o.buttons.R2.colorR/2.55),e[n*51+16]=Math.round(o.buttons.R2.colorG/2.55),e[n*51+17]=Math.round(o.buttons.R2.colorB/2.55),e[n*51+18]=Math.round(o.buttons.R3.colorR/2.55),e[n*51+19]=Math.round(o.buttons.R3.colorG/2.55),e[n*51+20]=Math.round(o.buttons.R3.colorB/2.55),e[n*51+21]=Math.round(o.buttons.R4.colorR/2.55),e[n*51+22]=Math.round(o.buttons.R4.colorG/2.55),e[n*51+23]=Math.round(o.buttons.R4.colorB/2.55),e[n*51+24]=o.buttons.Horn.inputIndex,e[n*51+25]=o.buttons.L1.inputIndex,e[n*51+26]=o.buttons.L2.inputIndex,e[n*51+27]=o.buttons.L3.inputIndex,e[n*51+28]=o.buttons.L4.inputIndex,e[n*51+29]=o.buttons.R1.inputIndex,e[n*51+30]=o.buttons.R2.inputIndex,e[n*51+31]=o.buttons.R3.inputIndex,e[n*51+32]=o.buttons.R4.inputIndex,e[n*51+33]=o.buttons.LS1.inputIndex,e[n*51+34]=o.buttons.LS2.inputIndex,e[n*51+35]=o.buttons.RS1.inputIndex,e[n*51+36]=o.buttons.RS2.inputIndex,e[n*51+37]=o.buttons.LJoystick_UP.inputIndex,e[n*51+38]=o.buttons.LJoystick_DOWN.inputIndex,e[n*51+39]=o.buttons.LJoystick_LEFT.inputIndex,e[n*51+40]=o.buttons.LJoystick_RIGHT.inputIndex,e[n*51+41]=o.buttons.LJoystick_CENTER.inputIndex,e[n*51+42]=o.buttons.LJoystick_CW.inputIndex,e[n*51+43]=o.buttons.LJoystick_CCW.inputIndex,e[n*51+44]=o.buttons.RJoystick_UP.inputIndex,e[n*51+45]=o.buttons.RJoystick_DOWN.inputIndex,e[n*51+46]=o.buttons.RJoystick_LEFT.inputIndex,e[n*51+47]=o.buttons.RJoystick_RIGHT.inputIndex,e[n*51+48]=o.buttons.RJoystick_CENTER.inputIndex,e[n*51+49]=o.buttons.RJoystick_CW.inputIndex,e[n*51+50]=o.buttons.RJoystick_CCW.inputIndex}return e}}class B{constructor(t){this.buffer=t,this.buttons={L1:{inputIndex:t[36],bufferIndex:36,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[37],bufferIndex:37,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[38],bufferIndex:38,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[39],bufferIndex:39,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},L5:{inputIndex:t[40],bufferIndex:40,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},L6:{colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R1:{inputIndex:t[41],bufferIndex:41,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R2:{inputIndex:t[42],bufferIndex:42,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},R3:{inputIndex:t[43],bufferIndex:43,colorR:Math.min(Math.round(t[24]*2.55),255),colorRIndex:24,colorG:Math.min(Math.round(t[25]*2.55),255),colorGIndex:25,colorB:Math.min(Math.round(t[26]*2.55),255),colorBIndex:26},R4:{inputIndex:t[44],bufferIndex:44,colorR:Math.min(Math.round(t[27]*2.55),255),colorRIndex:27,colorG:Math.min(Math.round(t[28]*2.55),255),colorGIndex:28,colorB:Math.min(Math.round(t[29]*2.55),255),colorBIndex:29},R5:{inputIndex:t[45],bufferIndex:45,colorR:Math.min(Math.round(t[30]*2.55),255),colorRIndex:30,colorG:Math.min(Math.round(t[31]*2.55),255),colorGIndex:31,colorB:Math.min(Math.round(t[32]*2.55),255),colorBIndex:32},R6:{colorR:Math.min(Math.round(t[33]*2.55),255),colorRIndex:33,colorG:Math.min(Math.round(t[34]*2.55),255),colorGIndex:34,colorB:Math.min(Math.round(t[35]*2.55),255),colorBIndex:35},LS1:{inputIndex:t[46],bufferIndex:46},LS_CW:{inputIndex:t[47],bufferIndex:47},LS_CCW:{inputIndex:t[48],bufferIndex:48},RS1:{inputIndex:t[49],bufferIndex:49},RS_CW:{inputIndex:t[50],bufferIndex:50},RS_CCW:{inputIndex:t[51],bufferIndex:51},LJoystick_UP:{inputIndex:t[52],bufferIndex:52},LJoystick_DOWN:{inputIndex:t[53],bufferIndex:53},LJoystick_LEFT:{inputIndex:t[54],bufferIndex:54},LJoystick_RIGHT:{inputIndex:t[55],bufferIndex:55},LJoystick_CENTER:{inputIndex:t[56],bufferIndex:56},LJoystick_CW:{inputIndex:t[57],bufferIndex:57},LJoystick_CCW:{inputIndex:t[58],bufferIndex:58},RJoystick_UP:{inputIndex:t[59],bufferIndex:59},RJoystick_DOWN:{inputIndex:t[60],bufferIndex:60},RJoystick_LEFT:{inputIndex:t[61],bufferIndex:61},RJoystick_RIGHT:{inputIndex:t[62],bufferIndex:62},RJoystick_CENTER:{inputIndex:t[63],bufferIndex:63},RJoystick_CW:{inputIndex:t[64],bufferIndex:64},RJoystick_CCW:{inputIndex:t[65],bufferIndex:65}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,e=null,n=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(e===null&&n===null)throw new Error("Invalid input index and color RGB");const o=this.buttons[t];if(e&&(o.inputIndex=e,this.buffer[o.bufferIndex]=e),n){const s=p(n);o.colorR=s.r,o.colorG=s.g,o.colorB=s.b,this.buffer[o.colorRIndex]=s.r,this.buffer[o.colorGIndex]=s.g,this.buffer[o.colorBIndex]=s.b}}static parseRawData(t){if(t.length%66!==0)throw new Error("Invalid raw data length:"+t.length);const e=[];for(let n=0;n<t.length;n+=66){const o=t.slice(n,n+66);e.push(new B(o))}return e}static serialize(t){const e=new Uint8Array(t.length*66);for(let n=0;n<t.length;n++){const o=t[n];e[n*66+0]=Math.round(o.buttons.L1.colorR/2.55),e[n*66+1]=Math.round(o.buttons.L1.colorG/2.55),e[n*66+2]=Math.round(o.buttons.L1.colorB/2.55),e[n*66+3]=Math.round(o.buttons.L2.colorR/2.55),e[n*66+4]=Math.round(o.buttons.L2.colorG/2.55),e[n*66+5]=Math.round(o.buttons.L2.colorB/2.55),e[n*66+6]=Math.round(o.buttons.L3.colorR/2.55),e[n*66+7]=Math.round(o.buttons.L3.colorG/2.55),e[n*66+8]=Math.round(o.buttons.L3.colorB/2.55),e[n*66+9]=Math.round(o.buttons.L5.colorR/2.55),e[n*66+10]=Math.round(o.buttons.L4.colorG/2.55),e[n*66+11]=Math.round(o.buttons.L4.colorB/2.55),e[n*66+12]=Math.round(o.buttons.L5.colorR/2.55),e[n*66+13]=Math.round(o.buttons.L5.colorG/2.55),e[n*66+14]=Math.round(o.buttons.L5.colorB/2.55),e[n*66+15]=Math.round(o.buttons.L6.colorR/2.55),e[n*66+16]=Math.round(o.buttons.L6.colorG/2.55),e[n*66+17]=Math.round(o.buttons.L6.colorB/2.55),e[n*66+18]=Math.round(o.buttons.R1.colorR/2.55),e[n*66+19]=Math.round(o.buttons.R1.colorG/2.55),e[n*66+20]=Math.round(o.buttons.R1.colorB/2.55),e[n*66+21]=Math.round(o.buttons.R2.colorR/2.55),e[n*66+22]=Math.round(o.buttons.R2.colorG/2.55),e[n*66+23]=Math.round(o.buttons.R2.colorB/2.55),e[n*66+24]=Math.round(o.buttons.R3.colorR/2.55),e[n*66+25]=Math.round(o.buttons.R3.colorG/2.55),e[n*66+26]=Math.round(o.buttons.R3.colorB/2.55),e[n*66+27]=Math.round(o.buttons.R4.colorR/2.55),e[n*66+28]=Math.round(o.buttons.R4.colorG/2.55),e[n*66+29]=Math.round(o.buttons.R4.colorB/2.55),e[n*66+30]=Math.round(o.buttons.R5.colorR/2.55),e[n*66+31]=Math.round(o.buttons.R5.colorG/2.55),e[n*66+32]=Math.round(o.buttons.R5.colorB/2.55),e[n*66+33]=Math.round(o.buttons.R6.colorR/2.55),e[n*66+34]=Math.round(o.buttons.R6.colorG/2.55),e[n*66+35]=Math.round(o.buttons.R6.colorB/2.55),e[n*66+36]=o.buttons.L1.inputIndex,e[n*66+37]=o.buttons.L2.inputIndex,e[n*66+38]=o.buttons.L3.inputIndex,e[n*66+39]=o.buttons.L4.inputIndex,e[n*66+40]=o.buttons.L5.inputIndex,e[n*66+41]=o.buttons.R1.inputIndex,e[n*66+42]=o.buttons.R2.inputIndex,e[n*66+43]=o.buttons.R3.inputIndex,e[n*66+44]=o.buttons.R4.inputIndex,e[n*66+45]=o.buttons.R5.inputIndex,e[n*66+46]=o.buttons.LS1.inputIndex,e[n*66+47]=o.buttons.LS_CW.inputIndex,e[n*66+48]=o.buttons.LS_CCW.inputIndex,e[n*66+49]=o.buttons.RS1.inputIndex,e[n*66+50]=o.buttons.RS_CW.inputIndex,e[n*66+51]=o.buttons.RS_CCW.inputIndex,e[n*66+52]=o.buttons.LJoystick_UP.inputIndex,e[n*66+53]=o.buttons.LJoystick_DOWN.inputIndex,e[n*66+54]=o.buttons.LJoystick_LEFT.inputIndex,e[n*66+55]=o.buttons.LJoystick_RIGHT.inputIndex,e[n*66+56]=o.buttons.LJoystick_CENTER.inputIndex,e[n*66+57]=o.buttons.LJoystick_CW.inputIndex,e[n*66+58]=o.buttons.LJoystick_CCW.inputIndex,e[n*66+59]=o.buttons.RJoystick_UP.inputIndex,e[n*66+60]=o.buttons.RJoystick_DOWN.inputIndex,e[n*66+61]=o.buttons.RJoystick_LEFT.inputIndex,e[n*66+62]=o.buttons.RJoystick_RIGHT.inputIndex,e[n*66+63]=o.buttons.RJoystick_CENTER.inputIndex,e[n*66+64]=o.buttons.RJoystick_CW.inputIndex,e[n*66+65]=o.buttons.RJoystick_CCW.inputIndex}return e}}const y={PRO:{label:"PRO",value:1},AIR:{label:"AIR",value:2},GT:{label:"GT",value:3}},Tt=y.PRO,Ft=z("hubConfig",{state:()=>({isAvailable:!1,modelByte:0,lastBridgeConnCarVendorByte:0,majorVersionByte:0,minorVersionByte:0,patchVersionByte:0,profileByte:0,buttonDayBrightness:0,buttonNightBrightness:0,rpmDayBrightness:0,rpmNightBrightness:0,rpmPatternByte:0,rpmStage1ColorR:0,rpmStage1ColorG:0,rpmStage1ColorB:0,rpmStage2ColorR:0,rpmStage2ColorG:0,rpmStage2ColorB:0,rpmStage3ColorR:0,rpmStage3ColorG:0,rpmStage3ColorB:0,rpmRedlineColorR:0,rpmRedlineColorG:0,rpmRedlineColorB:0,buttonConfigs:null,presetButtonConfigs:null}),actions:{setIsAvailable(r){this.isAvailable=r},setInfo(r){if(!(r instanceof Uint8Array)){console.error("infoArray is not Uint8Array");return}this.modelByte=r[0],this.lastBridgeConnCarVendorByte=r[1],this.majorVersionByte=r[2]>>4,this.minorVersionByte=r[2]&15,this.patchVersionByte=r[3]},setProfile(r){if(!(r instanceof Uint8Array)){console.error("profileArray is not Uint8Array");return}this.profileByte=Math.min(r[0],2)},setBrightness(r){if(!(r instanceof Uint8Array)){console.error("brightnessArray is not Uint8Array");return}this.buttonDayBrightness=Math.min(r[0],100),this.buttonNightBrightness=Math.min(r[1],100),this.rpmDayBrightness=Math.min(r[2],100),this.rpmNightBrightness=Math.min(r[3],100)},setAllButtonConfig(r){if(!(r instanceof Uint8Array)){console.error("buttonConfigArray is not Uint8Array");return}switch(E(y,this.modelByte).label){case"PRO":this.buttonConfigs=f.parseRawData(r);break;case"AIR":this.buttonConfigs=C.parseRawData(r);break;case"GT":this.buttonConfigs=B.parseRawData(r);break}this.presetButtonConfigs=this.buttonConfigs,this.isAvailable=!0},setRpmConfig(r){if(!(r instanceof Uint8Array)){console.error("rpmArray is not Uint8Array");return}this.rpmPatternByte=Math.min(r[0],2),this.rpmStage1ColorR=Math.min(Math.round(r[1]*2.55),255),this.rpmStage1ColorG=Math.min(Math.round(r[2]*2.55),255),this.rpmStage1ColorB=Math.min(Math.round(r[3]*2.55),255),this.rpmStage2ColorR=Math.min(Math.round(r[4]*2.55),255),this.rpmStage2ColorG=Math.min(Math.round(r[5]*2.55),255),this.rpmStage2ColorB=Math.min(Math.round(r[6]*2.55),255),this.rpmStage3ColorR=Math.min(Math.round(r[7]*2.55),255),this.rpmStage3ColorG=Math.min(Math.round(r[8]*2.55),255),this.rpmStage3ColorB=Math.min(Math.round(r[9]*2.55),255),this.rpmRedlineColorR=Math.min(Math.round(r[10]*2.55),255),this.rpmRedlineColorG=Math.min(Math.round(r[11]*2.55),255),this.rpmRedlineColorB=Math.min(Math.round(r[12]*2.55),255)},importConfigFile(r){try{const t=JSON.parse(r);if(t.modelByte!==void 0){if(this.modelByte!==t.modelByte)throw new Error("modelByte not match");this.modelByte=t.modelByte}else throw new Error("modelByte is undefined");if(t.lastBridgeConnCarVendorByte!==void 0)this.lastBridgeConnCarVendorByte=t.lastBridgeConnCarVendorByte;else throw new Error("lastBridgeConnCarVendorByte is undefined");if(t.profileByte!==void 0)this.profileByte=Math.min(t.profileByte,2);else throw new Error("profileByte is undefined");if(t.buttonDayBrightness!==void 0)this.buttonDayBrightness=Math.min(t.buttonDayBrightness,100);else throw new Error("buttonDayBrightness is undefined");if(t.buttonNightBrightness!==void 0)this.buttonNightBrightness=Math.min(t.buttonNightBrightness,100);else throw new Error("buttonNightBrightness is undefined");if(t.rpmDayBrightness!==void 0)this.rpmDayBrightness=Math.min(t.rpmDayBrightness,100);else throw new Error("rpmDayBrightness is undefined");if(t.rpmNightBrightness!==void 0)this.rpmNightBrightness=Math.min(t.rpmNightBrightness,100);else throw new Error("rpmNightBrightness is undefined");if(t.rpmPatternByte!==void 0)this.rpmPatternByte=Math.min(t.rpmPatternByte,2);else throw new Error("rpmPatternByte is undefined");if(t.rpmStage1ColorR!==void 0)this.rpmStage1ColorR=t.rpmStage1ColorR;else throw new Error("rpmStage1ColorR is undefined");if(t.rpmStage1ColorG!==void 0)this.rpmStage1ColorG=t.rpmStage1ColorG;else throw new Error("rpmStage1ColorG is undefined");if(t.rpmStage1ColorB!==void 0)this.rpmStage1ColorB=t.rpmStage1ColorB;else throw new Error("rpmStage1ColorB is undefined");if(t.rpmStage2ColorR!==void 0)this.rpmStage2ColorR=t.rpmStage2ColorR;else throw new Error("rpmStage2ColorR is undefined");if(t.rpmStage2ColorG!==void 0)this.rpmStage2ColorG=t.rpmStage2ColorG;else throw new Error("rpmStage2ColorG is undefined");if(t.rpmStage2ColorB!==void 0)this.rpmStage2ColorB=t.rpmStage2ColorB;else throw new Error("rpmStage2ColorB is undefined");if(t.rpmStage3ColorR!==void 0)this.rpmStage3ColorR=t.rpmStage3ColorR;else throw new Error("rpmStage3ColorR is undefined");if(t.rpmStage3ColorG!==void 0)this.rpmStage3ColorG=t.rpmStage3ColorG;else throw new Error("rpmStage3ColorG is undefined");if(t.rpmStage3ColorB!==void 0)this.rpmStage3ColorB=t.rpmStage3ColorB;else throw new Error("rpmStage3ColorB is undefined");if(t.rpmRedlineColorR!==void 0)this.rpmRedlineColorR=t.rpmRedlineColorR;else throw new Error("rpmRedlineColorR is undefined");if(t.rpmRedlineColorG!==void 0)this.rpmRedlineColorG=t.rpmRedlineColorG;else throw new Error("rpmRedlineColorG is undefined");if(t.rpmRedlineColorB!==void 0)this.rpmRedlineColorB=t.rpmRedlineColorB;else throw new Error("rpmRedlineColorB is undefined");if(t.buttonConfigs!==void 0){const e=Object.values(t.buttonConfigs),n=new Uint8Array(e);switch(E(y,this.modelByte).label){case"PRO":this.presetButtonConfigs=f.parseRawData(n);break;case"AIR":this.presetButtonConfigs=C.parseRawData(n);break;case"GT":this.presetButtonConfigs=B.parseRawData(n);break;default:break}}else throw new Error("buttonConfigs is undefined");return!0}catch(t){return console.error("importConfigFile error",t),!1}},exportConfigFile(){let r;const t=E(y,this.modelByte);switch(console.log("presetButtonConfigs",this.presetButtonConfigs),t.label){case"PRO":r=f.serialize(this.presetButtonConfigs);break;case"AIR":r=C.serialize(this.presetButtonConfigs);break;case"GT":r=B.serialize(this.presetButtonConfigs);break}const e={modelByte:this.modelByte,lastBridgeConnCarVendorByte:this.lastBridgeConnCarVendorByte,profileByte:this.profileByte,buttonDayBrightness:this.buttonDayBrightness,buttonNightBrightness:this.buttonNightBrightness,rpmDayBrightness:this.rpmDayBrightness,rpmNightBrightness:this.rpmNightBrightness,rpmPatternByte:this.rpmPatternByte,rpmStage1ColorR:this.rpmStage1ColorR,rpmStage1ColorG:this.rpmStage1ColorG,rpmStage1ColorB:this.rpmStage1ColorB,rpmStage2ColorR:this.rpmStage2ColorR,rpmStage2ColorG:this.rpmStage2ColorG,rpmStage2ColorB:this.rpmStage2ColorB,rpmStage3ColorR:this.rpmStage3ColorR,rpmStage3ColorG:this.rpmStage3ColorG,rpmStage3ColorB:this.rpmStage3ColorB,rpmRedlineColorR:this.rpmRedlineColorR,rpmRedlineColorG:this.rpmRedlineColorG,rpmRedlineColorB:this.rpmRedlineColorB,buttonConfigs:r};return JSON.stringify(e,(o,s)=>s,2)},setButtonConfig(r,t,e=null,n=null){if(this.buttonConfigs===null){console.error("buttonConfigs is null");return}if(e!==null&&(this.buttonConfigs[r].buttons[t].inputIndex=e.value),n!==null){const o=p(n);this.buttonConfigs[r].buttons[t].colorR=o.r,this.buttonConfigs[r].buttons[t].colorG=o.g,this.buttonConfigs[r].buttons[t].colorB=o.b}},setPresetButtonConfig(r,t,e=null,n=null){if(this.presetButtonConfigs===null){console.error("presetButtonConfigs is null");return}if(e!==null&&(this.presetButtonConfigs[r].buttons[t].inputIndex=e.value),n!==null){const o=p(n);this.presetButtonConfigs[r].buttons[t].colorR=o.r,this.presetButtonConfigs[r].buttons[t].colorG=o.g,this.presetButtonConfigs[r].buttons[t].colorB=o.b}},setButtonDayBrightness(r){this.buttonDayBrightness=Math.min(r,100)},setButtonNightBrightness(r){this.buttonNightBrightness=Math.min(r,100)},setRpmDayBrightness(r){this.rpmDayBrightness=Math.min(r,100)},setRpmNightBrightness(r){this.rpmNightBrightness=Math.min(r,100)},setRpmPattern(r){this.rpmPatternByte=Math.min(r,2)},setRpmStage1Color(r){const t=p(r);this.rpmStage1ColorR=t.r,this.rpmStage1ColorG=t.g,this.rpmStage1ColorB=t.b},setRpmStage2Color(r){const t=p(r);this.rpmStage2ColorR=t.r,this.rpmStage2ColorG=t.g,this.rpmStage2ColorB=t.b},setRpmStage3Color(r){const t=p(r);this.rpmStage3ColorR=t.r,this.rpmStage3ColorG=t.g,this.rpmStage3ColorB=t.b},setRpmRedlineColor(r){const t=p(r);this.rpmRedlineColorR=t.r,this.rpmRedlineColorG=t.g,this.rpmRedlineColorB=t.b},setCarVendor(r){this.lastBridgeConnCarVendorByte=r}},getters:{}});var M;const u=class u{static verify(t){if(!(t instanceof Uint8Array))throw new Error("Frame must be a Uint8Array");const e=F(v(u,M));if(t[0]!==e[0]||t[1]!==e[1])throw new Error("Invalid frame header");const n=t.slice(0,-1);if(W(n)!==t[t.length-1])throw new Error("Invalid checksum");return{cmd:t[2],data:t.slice(5,-1)}}static generateFrame(t,e){const n=F(v(u,M)),o=e.length,s=new Uint8Array(6+o);s[0]=n[0],s[1]=n[1],s[2]=t,s[3]=o>>8&255,s[4]=o&255,s.set(e,5);const a=W(s.slice(0,-1));return s[s.length-1]=a,s}static generateValidateFrame(t){if(!Object.hasOwn(u.SOURCE_BYTE,t))throw new Error("Invalid source byte");const e=u.SOURCE_BYTE[t],n={type:u.TLV_TYPE.SOURCE,length:1,value:new Uint8Array([e])},{buffer:o}=g([n]);return this.generateFrame(u.CMD_BYTE.VALIDATE,o)}static generateFetchInfoFrame(){const t=[{type:u.CONFIG_BYTE.INFO,length:0,value:null},{type:u.CONFIG_BYTE.PROFILE,length:0,value:null},{type:u.CONFIG_BYTE.BRIGHTNESS,length:0,value:null},{type:u.CONFIG_BYTE.BUTTON,length:0,value:null},{type:u.CONFIG_BYTE.RPM,length:0,value:null}],{buffer:e}=g(t);return this.generateFrame(u.CMD_BYTE.GET_CONFIG,e)}static generateSetProfileFrame(t){const e=[{type:u.CONFIG_BYTE.PROFILE,length:1,value:new Uint8Array([t])}],{buffer:n}=g(e);return this.generateFrame(u.CMD_BYTE.SET_CONFIG,n)}static generateSetBrightnessFrame(t=null,e=null){let n=255;e===null||e>100?n=100:n=e;const o=[{type:u.CONFIG_BYTE.BRIGHTNESS,length:2,value:new Uint8Array([t,n])}],{buffer:s}=g(o);return this.generateFrame(u.CMD_BYTE.SET_CONFIG,s)}static generateSetButtonDayBrightnessFrame(t=null){return this.generateSetBrightnessFrame(1,t)}static generateSetButtonNightBrightnessFrame(t=null){return this.generateSetBrightnessFrame(2,t)}static generateSetRpmDayBrightnessFrame(t=null){return this.generateSetBrightnessFrame(4,t)}static generateSetRpmNightBrightnessFrame(t=null){return this.generateSetBrightnessFrame(8,t)}static generateEnableBrightnessFrame(t,e){let n=0;t===0&&(n|=1),e===0&&(n|=2);const o=[{type:u.CONFIG_BYTE.ENABLE_BRIGHTNESS,length:1,value:new Uint8Array([n])}],{buffer:s}=g(o);return this.generateFrame(u.CMD_BYTE.SET_CONFIG,s)}static generateEnableDayBrightnessFrame(t){return this.generateEnableBrightnessFrame(1,t)}static generateEnableNightBrightnessFrame(t){return this.generateEnableBrightnessFrame(0,t)}static generateSetButtonFrame(t,e,n=null,o=null){if(t===null)return console.error("buttonByte cannot be null"),null;if(e===null)return console.error("profileByte cannot be null"),null;if(n===null&&o===null)return console.error("func and rgb cannot be null at the same time"),null;let s=0,a=255,l=255,i=255,c=255;if(n!==null&&(s|=1,a=n),o!==null){s|=2;const I=p(o);l=I.r,i=I.g,c=I.b}if(s===0)throw new Error("optionByte cannot be 0");const h=[{type:u.CONFIG_BYTE.BUTTON,length:7,value:new Uint8Array([t,e,s&255,a,l,i,c])}],{buffer:d}=g(h);return this.generateFrame(u.CMD_BYTE.SET_CONFIG,d)}static generateSetRpmFrame(t,e,n=null){if(t===null&&e===null)throw new Error("patternByte and stageByte cannot be null at the same time");let o=0,s=255,a=255,l=255;if(t!==null)o=1;else if(e!==null&&(o=2,n!==null)){const h=p(n);s=h.r,a=h.g,l=h.b}const i=[{type:u.CONFIG_BYTE.RPM,length:6,value:new Uint8Array([o,t,e,s,a,l])}],{buffer:c}=g(i);return this.generateFrame(u.CMD_BYTE.SET_CONFIG,c)}static generateSetRpmPatternFrame(t){return this.generateSetRpmFrame(t,null,null)}static generateSetRpmStage1ColorFrame(t){return this.generateSetRpmFrame(null,0,t)}static generateSetRpmStage2ColorFrame(t){return this.generateSetRpmFrame(null,1,t)}static generateSetRpmStage3ColorFrame(t){return this.generateSetRpmFrame(null,2,t)}static generateSetRpmRedlineColorFrame(t){return this.generateSetRpmFrame(null,3,t)}};M=new WeakMap,N(u,M,"5043"),m(u,"CMD_BYTE",{VALIDATE:0,GET_CONFIG:2,SET_CONFIG:3}),m(u,"TLV_TYPE",{SOURCE:1,CONFIG:2}),m(u,"SOURCE_BYTE",{OK:0,WEBSITE:1,APP:2,EXIT:250,FACTORY:252,FAIL:255}),m(u,"CONFIG_BYTE",{INFO:0,PROFILE:1,BRIGHTNESS:2,BUTTON:3,ENABLE_BRIGHTNESS:4,RPM:5});let A=u;const kt=(r,t)=>{const e=r.__vccOpts||r;for(const[n,o]of t)e[n]=o;return e};export{Lt as A,_t as D,Gt as G,y as H,xt as P,Rt as Q,vt as R,A as U,kt as _,bt as a,Ft as b,yt as c,ht as d,E as e,Tt as f,Bt as g,wt as h,ft as i,q as j,X as k,Mt as l,at as m,ut as n,p as o,Ct as s,Et as t,St as u};
