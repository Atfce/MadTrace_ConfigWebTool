var $=Object.defineProperty;var b=n=>{throw TypeError(n)};var Q=(n,t,e)=>t in n?$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var f=(n,t,e)=>Q(n,typeof t!="symbol"?t+"":t,e),K=(n,t,e)=>t.has(n)||b("Cannot "+e);var v=(n,t,e)=>(K(n,t,"read from private field"),e?e.call(n):t.get(n)),k=(n,t,e)=>t.has(n)?b("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e);import{r as m,j as Z,q as C,c as A,g as W,o as y,W as H,s as B,h as tt,a4 as w,aF as et,aG as O,w as N,i as nt,aH as ot}from"./index-CHL51Mb7.js";import{d as Y}from"./pinia-BuLMuZ4Z.js";function rt(){const n=m(!Z.value);return n.value===!1&&C(()=>{n.value=!0}),{isHydrated:n}}const V=typeof ResizeObserver<"u",J=V===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},gt=A({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(n,{emit:t}){let e=null,o,r={width:-1,height:-1};function a(s){s===!0||n.debounce===0||n.debounce==="0"?i():e===null&&(e=setTimeout(i,n.debounce))}function i(){if(e!==null&&(clearTimeout(e),e=null),o){const{offsetWidth:s,offsetHeight:u}=o;(s!==r.width||u!==r.height)&&(r={width:s,height:u},t("resize",r))}}const{proxy:l}=W();if(l.trigger=a,V===!0){let s;const u=h=>{o=l.$el.parentNode,o?(s=new ResizeObserver(a),s.observe(o),i()):h!==!0&&B(()=>{u(!0)})};return C(()=>{u()}),y(()=>{e!==null&&clearTimeout(e),s!==void 0&&(s.disconnect!==void 0?s.disconnect():o&&s.unobserve(o))}),H}else{let s=function(){e!==null&&(clearTimeout(e),e=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",a,w.passive),d=void 0)},u=function(){s(),o&&o.contentDocument&&(d=o.contentDocument.defaultView,d.addEventListener("resize",a,w.passive),i())};const{isHydrated:h}=rt();let d;return C(()=>{B(()=>{o=l.$el,o&&u()})}),y(s),()=>{if(h.value===!0)return tt("object",{class:"q--avoid-card-border",style:J.style,tabindex:-1,type:"text/html",data:J.url,"aria-hidden":"true",onLoad:u})}}}}),at=[Element,String],st=[null,document,document.body,document.scrollingElement,document.documentElement];function it(n,t){let e=et(t);if(e===void 0){if(n==null)return window;e=n.closest(".scroll,.scroll-y,.overflow-auto")}return st.includes(e)?window:e}function z(n){return n===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:n.scrollTop}function j(n){return n===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:n.scrollLeft}function X(n,t,e=0){const o=arguments[3]===void 0?performance.now():arguments[3],r=z(n);if(e<=0){r!==t&&E(n,t);return}requestAnimationFrame(a=>{const i=a-o,l=r+(t-r)/Math.max(i,e)*i;E(n,l),l!==t&&X(n,t,e-i,a)})}function q(n,t,e=0){const o=arguments[3]===void 0?performance.now():arguments[3],r=j(n);if(e<=0){r!==t&&F(n,t);return}requestAnimationFrame(a=>{const i=a-o,l=r+(t-r)/Math.max(i,e)*i;F(n,l),l!==t&&q(n,t,e-i,a)})}function E(n,t){if(n===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}n.scrollTop=t}function F(n,t){if(n===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}n.scrollLeft=t}function Rt(n,t,e){if(e){X(n,t,e);return}E(n,t)}function Mt(n,t,e){if(e){q(n,t,e);return}F(n,t)}let M;function Ct(){if(M!==void 0)return M;const n=document.createElement("p"),t=document.createElement("div");O(n,{width:"100%",height:"200px"}),O(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(n),document.body.appendChild(t);const e=n.offsetWidth;t.style.overflow="scroll";let o=n.offsetWidth;return e===o&&(o=t.clientWidth),t.remove(),M=e-o,M}function vt(n,t=!0){return!n||n.nodeType!==Node.ELEMENT_NODE?!1:t?n.scrollHeight>n.clientHeight&&(n.classList.contains("scroll")||n.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(n)["overflow-y"])):n.scrollWidth>n.clientWidth&&(n.classList.contains("scroll")||n.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(n)["overflow-x"]))}const{passive:U}=w,lt=["both","horizontal","vertical"],yt=A({name:"QScrollObserver",props:{axis:{type:String,validator:n=>lt.includes(n),default:"vertical"},debounce:[String,Number],scrollTarget:at},emits:["scroll"],setup(n,{emit:t}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,r,a;N(()=>n.scrollTarget,()=>{s(),l()});function i(){o!==null&&o();const d=Math.max(0,z(r)),I=j(r),x={top:d-e.position.top,left:I-e.position.left};if(n.axis==="vertical"&&x.top===0||n.axis==="horizontal"&&x.left===0)return;const _=Math.abs(x.top)>=Math.abs(x.left)?x.top<0?"up":"down":x.left<0?"left":"right";e.position={top:d,left:I},e.directionChanged=e.direction!==_,e.delta=x,e.directionChanged===!0&&(e.direction=_,e.inflectionPoint=e.position),t("scroll",{...e})}function l(){r=it(a,n.scrollTarget),r.addEventListener("scroll",u,U),u(!0)}function s(){r!==void 0&&(r.removeEventListener("scroll",u,U),r=void 0)}function u(d){if(d===!0||n.debounce===0||n.debounce==="0")i();else if(o===null){const[I,x]=n.debounce?[setTimeout(i,n.debounce),clearTimeout]:[requestAnimationFrame(i),cancelAnimationFrame];o=()=>{x(I),o=null}}}const{proxy:h}=W();return N(()=>h.$q.lang.rtl,i),C(()=>{a=h.$el.parentNode,l()}),y(()=>{o!==null&&o(),s()}),Object.assign(h,{trigger:u,getPosition:()=>e}),H}});function Bt(){return nt(ot)}const wt=async(n,t)=>{await B(),await ct(50);const e=n.value[t]?.$el;e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},ct=n=>new Promise(t=>setTimeout(t,n));function ut(n,t){const e=Object.values(n).find(o=>o.value===t);return e||null}const T=n=>{if(typeof n!="string")throw new Error("Input must be a string");if(n.length%2!==0)throw new Error("Input must have an even number of characters");const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2){const o=parseInt(n.substring(e,e+2),16);if(isNaN(o))throw new Error(`Invalid hex character at position ${e}: ${n.substring(e,e+2)}`);t[e/2]=o}return t},g=n=>{n=n.replace("#","");const t=parseInt(n.substring(0,2),16),e=parseInt(n.substring(2,4),16),o=parseInt(n.substring(4,6),16);return{r:t,g:e,b:o}},Et=(n,t,e)=>"#"+((n<<16)+(t<<8)+e).toString(16).padStart(6,"0"),ht=(n,t)=>{if(!(n instanceof Uint8Array)||!(t instanceof Uint8Array))throw new Error("Both source and target must be Uint8Array");for(let e=0;e<=n.length-t.length;e++)if(t.every((o,r)=>n[e+r]===o))return!0;return!1},D=n=>n.reduce((t,e)=>t+e,0)&255,p=n=>{const t=[];let e=0;for(const a of n){const{type:i,length:l,value:s}=a;if(i<0||i>255)throw new Error("Type must be between 0 and 255");if(l<0||l>255)throw new Error("itemLength must be between 0 and 255");if(l>0){if(s.length!==l)throw new Error("Value length does not match specified length");if(!(s instanceof Uint8Array))throw new Error("Value must be a Uint8Array")}const u=new Uint8Array(2+l);u[0]=i,u[1]=l,l>0&&u.set(s,2),t.push(u),e+=u.length}const o=new Uint8Array(e);let r=0;for(const a of t)o.set(a,r),r+=a.length;return{length:e,buffer:o}},Ft=n=>{if(!(n instanceof Uint8Array))throw new Error("Input must be a Uint8Array");const t=[];let e=0;for(;e<n.length;){const o=n[e++];if(e>=n.length)throw new Error("Unexpected end of buffer");let r=n[e++];if(r<0||r>255)throw new Error("Length must be between 0 and 255");if(e+r>n.length)throw new Error("Unexpected end of buffer");const a=n.slice(e,e+r);t.push({type:o,length:r,value:a}),e+=r}if(e!==n.length)throw new Error("Not all data was consumed");return t};class dt{constructor(){this.port=null,this.reader=null,this.writer=null,this.readPointer=0,this.isConnected=!1,this.receiveBuffer=new Uint8Array,this.callbacks={receive:[],error:null,stateChange:null}}on(t,e){return t==="receive"?this.callbacks.receive.push(e):t in this.callbacks&&(this.callbacks[t]=e),this}off(t,e){return t==="receive"?this.callbacks.receive=this.callbacks.receive.filter(o=>o!==e):t in this.callbacks&&(this.callbacks[t]=null),this}static isSupported(){return"serial"in navigator}async connect(t={baudRate:115200}){try{return this.port=await navigator.serial.requestPort(),await this.port.open(t),this.isConnected=!0,this._triggerStateChange(),this._startReading(),!0}catch(e){return this._handleError(e),!1}}async disconnect(){try{return this.reader&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close(),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close(),this.port=null),this.isConnected=!1,this._triggerStateChange(),!0}catch(t){throw new Error("Disconnect failed with error: "+t.message)}}clearBuffer(){this.receiveBuffer=new Uint8Array,this.readPointer=0}async sendRawData(t){if(!this.isConnected)return!1;if(t==null)throw new Error("Data cannot be null or undefined");if(!(t instanceof Uint8Array))throw new Error("Data must be a Uint8Array");try{return this.writer=this.port.writable.getWriter(),await this.writer.write(t),!0}catch(e){return this._handleError(e),!1}finally{this.writer&&(this.writer.releaseLock(),this.writer=null)}}async sendHex(t){return this.sendRawData(T(t))}async sendText(t){return this.sendRawData(new TextEncoder().encode(t))}async validateDevice({queryCommand:t,response:e,timeout:o=1e3}){if(!this.isConnected)throw new Error("Device not connected");const r=this.receiveBuffer.length;return new Promise(a=>{const i=setTimeout(()=>{this.off("receive",l),a({result:!1,reason:"Timeout"})},o),l=()=>{const s=this.receiveBuffer.slice(r);ht(s,e)&&(clearTimeout(i),this.off("receive",l),a({result:!0}))};this.on("receive",l),this.sendRawData(t)})}async _startReading(){try{for(this.reader=this.port.readable.getReader();;){const{value:t,done:e}=await this.reader.read();if(e)break;this.receiveBuffer=new Uint8Array([...this.receiveBuffer,...t]);const o=this.receiveBuffer.slice(this.readPointer);this.callbacks.receive.forEach(r=>r(o)),this.readPointer=this.receiveBuffer.length}}catch(t){this._handleError(t)}finally{this.reader.releaseLock()}}_triggerStateChange(){this.callbacks.stateChange&&this.callbacks.stateChange(this.isConnected)}async _handleError(t){console.error("SerialManager Error:",t),this.callbacks.error&&this.callbacks.error({type:"serial",message:t.message,stack:t.stack});try{await this.disconnect()}catch(e){console.error("Disconnect Error:",e),alert("Connection error, please refresh the page and replug the device.")}}}const Tt=Y("serialData",()=>{const n=m(new dt),t=m(null),e=m(null),o=m(!1),r=()=>{n.value.on("receive",i).on("error",s=>{s.value=s,console.log("err",s)})},a=async s=>(n.value.clearBuffer(),n.value.sendHex(s)),i=s=>{t.value=s};return{manager:n,receiveData:t,err:e,isConnected:o,setIsConnected:s=>{o.value=s},init:r,sendHex:a}}),xt={Horn:{separator:!0,value:1,hasFunction:!0,hasColor:!1},L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS2:{separator:!1,value:33,hasFunction:!0,hasColor:!1},RS1:{separator:!1,value:40,hasFunction:!0,hasColor:!1},RS2:{separator:!1,value:41,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},St=xt,Lt={L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},L5:{separator:!1,value:20,hasFunction:!0,hasColor:!0},L6:{separator:!1,value:21,hasFunction:!1,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},R5:{separator:!1,value:28,hasFunction:!0,hasColor:!0},R6:{separator:!1,value:29,hasFunction:!1,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS_CW:{separator:!0,value:36,hasFunction:!0,hasColor:!1},LS_CCW:{separator:!1,value:37,hasFunction:!0,hasColor:!1},RS1:{separator:!0,value:40,hasFunction:!0,hasColor:!1},RS_CW:{separator:!0,value:44,hasFunction:!0,hasColor:!1},RS_CCW:{separator:!1,value:45,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Gt={label:"None",separator:!0,value:1,hasFunction:!0,hasColor:!1};class S{constructor(t){this.buffer=t,this.buttons={Horn:{inputIndex:t[24],bufferIndex:24},L1:{inputIndex:t[25],bufferIndex:25,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[26],bufferIndex:26,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[27],bufferIndex:27,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[28],bufferIndex:28,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},R1:{inputIndex:t[29],bufferIndex:29,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},R2:{inputIndex:t[30],bufferIndex:30,colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R3:{inputIndex:t[31],bufferIndex:31,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R4:{inputIndex:t[32],bufferIndex:32,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},LS1:{inputIndex:t[33],bufferIndex:33},LS2:{inputIndex:t[34],bufferIndex:34},RS1:{inputIndex:t[35],bufferIndex:35},RS2:{inputIndex:t[36],bufferIndex:36},LJoystick_UP:{inputIndex:t[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:t[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:t[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:t[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:t[41],bufferIndex:41},LJoystick_CW:{inputIndex:t[42],bufferIndex:42},LJoystick_CCW:{inputIndex:t[43],bufferIndex:43},RJoystick_UP:{inputIndex:t[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:t[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:t[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:t[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:t[48],bufferIndex:48},RJoystick_CW:{inputIndex:t[49],bufferIndex:49},RJoystick_CCW:{inputIndex:t[50],bufferIndex:50}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,e=null,o=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(e===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[t];if(e&&(r.inputIndex=e,this.buffer[r.bufferIndex]=e),o){const a=g(o);r.colorR=a.r,r.colorG=a.g,r.colorB=a.b,this.buffer[r.colorRIndex]=a.r,this.buffer[r.colorGIndex]=a.g,this.buffer[r.colorBIndex]=a.b}}static parseRawData(t){if(t.length%51!==0)throw new Error("Invalid raw data length:"+t.length);const e=[];for(let o=0;o<t.length;o+=51){const r=t.slice(o,o+51);e.push(new S(r))}return e}}class L{constructor(t){this.buffer=t,this.buttons={Horn:{inputIndex:t[24],bufferIndex:24},L1:{inputIndex:t[25],bufferIndex:25,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[26],bufferIndex:26,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[27],bufferIndex:27,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[28],bufferIndex:28,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},R1:{inputIndex:t[29],bufferIndex:29,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},R2:{inputIndex:t[30],bufferIndex:30,colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R3:{inputIndex:t[31],bufferIndex:31,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R4:{inputIndex:t[32],bufferIndex:32,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},LS1:{inputIndex:t[33],bufferIndex:33},LS2:{inputIndex:t[34],bufferIndex:34},RS1:{inputIndex:t[35],bufferIndex:35},RS2:{inputIndex:t[36],bufferIndex:36},LJoystick_UP:{inputIndex:t[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:t[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:t[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:t[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:t[41],bufferIndex:41},LJoystick_CW:{inputIndex:t[42],bufferIndex:42},LJoystick_CCW:{inputIndex:t[43],bufferIndex:43},RJoystick_UP:{inputIndex:t[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:t[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:t[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:t[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:t[48],bufferIndex:48},RJoystick_CW:{inputIndex:t[49],bufferIndex:49},RJoystick_CCW:{inputIndex:t[50],bufferIndex:50}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,e=null,o=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(e===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[t];if(e&&(r.inputIndex=e,this.buffer[r.bufferIndex]=e),o){const a=g(o);r.colorR=a.r,r.colorG=a.g,r.colorB=a.b,this.buffer[r.colorRIndex]=a.r,this.buffer[r.colorGIndex]=a.g,this.buffer[r.colorBIndex]=a.b}}static parseRawData(t){if(t.length%51!==0)throw new Error("Invalid raw data length:"+t.length);const e=[];for(let o=0;o<t.length;o+=51){const r=t.slice(o,o+51);e.push(new L(r))}return e}}class G{constructor(t){this.buffer=t,this.buttons={L1:{inputIndex:t[36],bufferIndex:36,colorR:Math.min(Math.round(t[0]*2.55),255),colorRIndex:0,colorG:Math.min(Math.round(t[1]*2.55),255),colorGIndex:1,colorB:Math.min(Math.round(t[2]*2.55),255),colorBIndex:2},L2:{inputIndex:t[37],bufferIndex:37,colorR:Math.min(Math.round(t[3]*2.55),255),colorRIndex:3,colorG:Math.min(Math.round(t[4]*2.55),255),colorGIndex:4,colorB:Math.min(Math.round(t[5]*2.55),255),colorBIndex:5},L3:{inputIndex:t[38],bufferIndex:38,colorR:Math.min(Math.round(t[6]*2.55),255),colorRIndex:6,colorG:Math.min(Math.round(t[7]*2.55),255),colorGIndex:7,colorB:Math.min(Math.round(t[8]*2.55),255),colorBIndex:8},L4:{inputIndex:t[39],bufferIndex:39,colorR:Math.min(Math.round(t[9]*2.55),255),colorRIndex:9,colorG:Math.min(Math.round(t[10]*2.55),255),colorGIndex:10,colorB:Math.min(Math.round(t[11]*2.55),255),colorBIndex:11},L5:{inputIndex:t[40],bufferIndex:40,colorR:Math.min(Math.round(t[12]*2.55),255),colorRIndex:12,colorG:Math.min(Math.round(t[13]*2.55),255),colorGIndex:13,colorB:Math.min(Math.round(t[14]*2.55),255),colorBIndex:14},L6:{colorR:Math.min(Math.round(t[15]*2.55),255),colorRIndex:15,colorG:Math.min(Math.round(t[16]*2.55),255),colorGIndex:16,colorB:Math.min(Math.round(t[17]*2.55),255),colorBIndex:17},R1:{inputIndex:t[41],bufferIndex:41,colorR:Math.min(Math.round(t[18]*2.55),255),colorRIndex:18,colorG:Math.min(Math.round(t[19]*2.55),255),colorGIndex:19,colorB:Math.min(Math.round(t[20]*2.55),255),colorBIndex:20},R2:{inputIndex:t[42],bufferIndex:42,colorR:Math.min(Math.round(t[21]*2.55),255),colorRIndex:21,colorG:Math.min(Math.round(t[22]*2.55),255),colorGIndex:22,colorB:Math.min(Math.round(t[23]*2.55),255),colorBIndex:23},R3:{inputIndex:t[43],bufferIndex:43,colorR:Math.min(Math.round(t[24]*2.55),255),colorRIndex:24,colorG:Math.min(Math.round(t[25]*2.55),255),colorGIndex:25,colorB:Math.min(Math.round(t[26]*2.55),255),colorBIndex:26},R4:{inputIndex:t[44],bufferIndex:44,colorR:Math.min(Math.round(t[27]*2.55),255),colorRIndex:27,colorG:Math.min(Math.round(t[28]*2.55),255),colorGIndex:28,colorB:Math.min(Math.round(t[29]*2.55),255),colorBIndex:29},R5:{inputIndex:t[45],bufferIndex:45,colorR:Math.min(Math.round(t[30]*2.55),255),colorRIndex:30,colorG:Math.min(Math.round(t[31]*2.55),255),colorGIndex:31,colorB:Math.min(Math.round(t[32]*2.55),255),colorBIndex:32},R6:{colorR:Math.min(Math.round(t[33]*2.55),255),colorRIndex:33,colorG:Math.min(Math.round(t[34]*2.55),255),colorGIndex:34,colorB:Math.min(Math.round(t[35]*2.55),255),colorBIndex:35},LS1:{inputIndex:t[46],bufferIndex:46},LS_CW:{inputIndex:t[47],bufferIndex:47},LS_CCW:{inputIndex:t[48],bufferIndex:48},RS1:{inputIndex:t[49],bufferIndex:49},RS_CW:{inputIndex:t[50],bufferIndex:50},RS_CCW:{inputIndex:t[51],bufferIndex:51},LJoystick_UP:{inputIndex:t[52],bufferIndex:52},LJoystick_DOWN:{inputIndex:t[53],bufferIndex:53},LJoystick_LEFT:{inputIndex:t[54],bufferIndex:54},LJoystick_RIGHT:{inputIndex:t[55],bufferIndex:55},LJoystick_CENTER:{inputIndex:t[56],bufferIndex:56},LJoystick_CW:{inputIndex:t[57],bufferIndex:57},LJoystick_CCW:{inputIndex:t[58],bufferIndex:58},RJoystick_UP:{inputIndex:t[59],bufferIndex:59},RJoystick_DOWN:{inputIndex:t[60],bufferIndex:60},RJoystick_LEFT:{inputIndex:t[61],bufferIndex:61},RJoystick_RIGHT:{inputIndex:t[62],bufferIndex:62},RJoystick_CENTER:{inputIndex:t[63],bufferIndex:63},RJoystick_CW:{inputIndex:t[64],bufferIndex:64},RJoystick_CCW:{inputIndex:t[65],bufferIndex:65}}}getButtonConfig(t){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);return this.buttons[t]}setButtonConfig(t,e=null,o=null){if(!Object.hasOwn(this.buttons,t))throw new Error("Invalid button key:"+t);if(e===null&&o===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[t];if(e&&(r.inputIndex=e,this.buffer[r.bufferIndex]=e),o){const a=g(o);r.colorR=a.r,r.colorG=a.g,r.colorB=a.b,this.buffer[r.colorRIndex]=a.r,this.buffer[r.colorGIndex]=a.g,this.buffer[r.colorBIndex]=a.b}}static parseRawData(t){if(t.length%66!==0)throw new Error("Invalid raw data length:"+t.length);const e=[];for(let o=0;o<t.length;o+=66){const r=t.slice(o,o+66);e.push(new G(r))}return e}}const It={PRO:{label:"PRO",value:1},AIR:{label:"AIR",value:2},GT:{label:"GT",value:3}},_t=Y("hubConfig",{state:()=>({isAvailable:!1,modelByte:0,lastBridgeConnCarVendorByte:0,majorVersionByte:0,minorVersionByte:0,patchVersionByte:0,profileByte:0,buttonDayBrightness:0,buttonNightBrightness:0,rpmDayBrightness:0,rpmNightBrightness:0,rpmPatternByte:0,rpmStage1ColorR:0,rpmStage1ColorG:0,rpmStage1ColorB:0,rpmStage2ColorR:0,rpmStage2ColorG:0,rpmStage2ColorB:0,rpmStage3ColorR:0,rpmStage3ColorG:0,rpmStage3ColorB:0,rpmRedlineColorR:0,rpmRedlineColorG:0,rpmRedlineColorB:0,buttonConfigs:null}),actions:{setIsAvailable(n){this.isAvailable=n},setInfo(n){if(!(n instanceof Uint8Array)){console.error("infoArray is not Uint8Array");return}this.modelByte=n[0],this.lastBridgeConnCarVendorByte=n[1],this.majorVersionByte=n[2]>>4,this.minorVersionByte=n[2]&15,this.patchVersionByte=n[3]},setProfile(n){if(!(n instanceof Uint8Array)){console.error("profileArray is not Uint8Array");return}this.profileByte=n[0]},setBrightness(n){if(!(n instanceof Uint8Array)){console.error("brightnessArray is not Uint8Array");return}this.buttonDayBrightness=Math.min(n[0],100),this.buttonNightBrightness=Math.min(n[1],100),this.rpmDayBrightness=Math.min(n[2],100),this.rpmNightBrightness=Math.min(n[3],100)},setAllButtonConfig(n){if(!(n instanceof Uint8Array)){console.error("buttonConfigArray is not Uint8Array");return}switch(ut(It,this.modelByte).label){case"PRO":this.buttonConfigs=S.parseRawData(n);break;case"AIR":this.buttonConfigs=L.parseRawData(n);break;case"GT":this.buttonConfigs=G.parseRawData(n);break}this.isAvailable=!0},setRpmConfig(n){if(!(n instanceof Uint8Array)){console.error("rpmArray is not Uint8Array");return}this.rpmPatternByte=n[0],this.rpmStage1ColorR=Math.min(Math.round(n[1]*2.55),255),this.rpmStage1ColorG=Math.min(Math.round(n[2]*2.55),255),this.rpmStage1ColorB=Math.min(Math.round(n[3]*2.55),255),this.rpmStage2ColorR=Math.min(Math.round(n[4]*2.55),255),this.rpmStage2ColorG=Math.min(Math.round(n[5]*2.55),255),this.rpmStage2ColorB=Math.min(Math.round(n[6]*2.55),255),this.rpmStage3ColorR=Math.min(Math.round(n[7]*2.55),255),this.rpmStage3ColorG=Math.min(Math.round(n[8]*2.55),255),this.rpmStage3ColorB=Math.min(Math.round(n[9]*2.55),255),this.rpmRedlineColorR=Math.min(Math.round(n[10]*2.55),255),this.rpmRedlineColorG=Math.min(Math.round(n[11]*2.55),255),this.rpmRedlineColorB=Math.min(Math.round(n[12]*2.55),255)}},getters:{}});var R;const c=class c{static verify(t){if(!(t instanceof Uint8Array))throw new Error("Frame must be a Uint8Array");const e=T(v(c,R));if(t[0]!==e[0]||t[1]!==e[1])throw new Error("Invalid frame header");const o=t.slice(0,-1);if(D(o)!==t[t.length-1])throw new Error("Invalid checksum");return{cmd:t[2],data:t.slice(5,-1)}}static generateFrame(t,e){const o=T(v(c,R)),r=e.length,a=new Uint8Array(6+r);a[0]=o[0],a[1]=o[1],a[2]=t,a[3]=r>>8&255,a[4]=r&255,a.set(e,5);const i=D(a.slice(0,-1));return a[a.length-1]=i,a}static generateValidateFrame(t){if(!Object.hasOwn(c.SOURCE_BYTE,t))throw new Error("Invalid source byte");const e=c.SOURCE_BYTE[t],o={type:c.TLV_TYPE.SOURCE,length:1,value:new Uint8Array([e])},{buffer:r}=p([o]);return this.generateFrame(c.CMD_BYTE.VALIDATE,r)}static generateFetchInfoFrame(){const t=[{type:c.CONFIG_BYTE.INFO,length:0,value:null},{type:c.CONFIG_BYTE.PROFILE,length:0,value:null},{type:c.CONFIG_BYTE.BRIGHTNESS,length:0,value:null},{type:c.CONFIG_BYTE.BUTTON,length:0,value:null},{type:c.CONFIG_BYTE.RPM,length:0,value:null}],{buffer:e}=p(t);return this.generateFrame(c.CMD_BYTE.GET_CONFIG,e)}static generateSetProfileFrame(t){const e=[{type:c.CONFIG_BYTE.PROFILE,length:1,value:new Uint8Array([t])}],{buffer:o}=p(e);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,o)}static generateSetBrightnessFrame(t=null,e=null){let o=255;e===null||e>100?o=100:o=e;const r=[{type:c.CONFIG_BYTE.BRIGHTNESS,length:2,value:new Uint8Array([t,o])}],{buffer:a}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,a)}static generateSetButtonDayBrightnessFrame(t=null){return this.generateSetBrightnessFrame(1,t)}static generateSetButtonNightBrightnessFrame(t=null){return this.generateSetBrightnessFrame(2,t)}static generateSetRpmDayBrightnessFrame(t=null){return this.generateSetBrightnessFrame(4,t)}static generateSetRpmNightBrightnessFrame(t=null){return this.generateSetBrightnessFrame(8,t)}static generateEnableBrightnessFrame(t,e){let o=0;t===0&&(o|=1),e===0&&(o|=2);const r=[{type:c.CONFIG_BYTE.ENABLE_BRIGHTNESS,length:1,value:new Uint8Array([o])}],{buffer:a}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,a)}static generateEnableDayBrightnessFrame(t){return this.generateEnableBrightnessFrame(1,t)}static generateEnableNightBrightnessFrame(t){return this.generateEnableBrightnessFrame(0,t)}static generateSetButtonFrame(t,e,o=null,r=null){if(t===null)return console.error("buttonByte cannot be null"),null;if(e===null)return console.error("profileByte cannot be null"),null;if(o===null&&r===null)return console.error("func and rgb cannot be null at the same time"),null;let a=0,i=255,l=255,s=255,u=255;if(o!==null&&(a|=1,i=o),r!==null){a|=2;const I=g(r);l=I.r,s=I.g,u=I.b}if(a===0)throw new Error("optionByte cannot be 0");const h=[{type:c.CONFIG_BYTE.BUTTON,length:7,value:new Uint8Array([t,e,a&255,i,l,s,u])}],{buffer:d}=p(h);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,d)}static generateSetRpmFrame(t,e,o=null){if(t===null&&e===null)throw new Error("patternByte and stageByte cannot be null at the same time");let r=0,a=255,i=255,l=255;if(t!==null)r=1;else if(e!==null&&(r=2,o!==null)){const h=g(o);a=h.r,i=h.g,l=h.b}const s=[{type:c.CONFIG_BYTE.RPM,length:6,value:new Uint8Array([r,t,e,a,i,l])}],{buffer:u}=p(s);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,u)}static generateSetRpmPatternFrame(t){return this.generateSetRpmFrame(t,null,null)}static generateSetRpmStage1Color(t){return this.generateSetRpmFrame(null,0,t)}static generateSetRpmStage2Color(t){return this.generateSetRpmFrame(null,1,t)}static generateSetRpmStage3Color(t){return this.generateSetRpmFrame(null,2,t)}static generateSetRpmRedlineColor(t){return this.generateSetRpmFrame(null,3,t)}};R=new WeakMap,k(c,R,"5043"),f(c,"CMD_BYTE",{VALIDATE:0,GET_CONFIG:2,SET_CONFIG:3}),f(c,"TLV_TYPE",{SOURCE:1,CONFIG:2}),f(c,"SOURCE_BYTE",{OK:0,WEBSITE:1,APP:2,EXIT:250,FACTORY:252,FAIL:255}),f(c,"CONFIG_BYTE",{INFO:0,PROFILE:1,BRIGHTNESS:2,BUTTON:3,ENABLE_BRIGHTNESS:4,RPM:5});let P=c;const bt=(n,t)=>{const e=n.__vccOpts||n;for(const[o,r]of t)e[o]=r;return e};export{St as A,Gt as D,Lt as G,It as H,xt as P,gt as Q,Et as R,P as U,bt as _,yt as a,_t as b,Bt as c,ct as d,Rt as e,j as f,Ct as g,z as h,vt as i,wt as j,at as k,it as l,g as m,ut as n,Mt as s,Ft as t,Tt as u};
