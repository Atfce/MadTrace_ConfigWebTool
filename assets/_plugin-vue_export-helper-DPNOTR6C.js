var X=Object.defineProperty;var b=o=>{throw TypeError(o)};var q=(o,e,t)=>e in o?X(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var p=(o,e,t)=>q(o,typeof e!="symbol"?e+"":e,t),$=(o,e,t)=>e.has(o)||b("Cannot "+t);var B=(o,e,t)=>($(o,e,"read from private field"),t?t.call(o):e.get(o)),k=(o,e,t)=>e.has(o)?b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t);import{r as g,j as Q,q as w,c as D,g as P,o as E,X as W,s as m,h as K,a5 as F,aF as Z,aG as S,w as O,i as ee,aH as te}from"./index-En0IJpGG.js";import{d as H}from"./pinia-CkN5-1p5.js";function oe(){const o=g(!Q.value);return o.value===!1&&w(()=>{o.value=!0}),{isHydrated:o}}const M=typeof ResizeObserver<"u",N=M===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},ge=D({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(o,{emit:e}){let t=null,n,r={width:-1,height:-1};function s(a){a===!0||o.debounce===0||o.debounce==="0"?i():t===null&&(t=setTimeout(i,o.debounce))}function i(){if(t!==null&&(clearTimeout(t),t=null),n){const{offsetWidth:a,offsetHeight:u}=n;(a!==r.width||u!==r.height)&&(r={width:a,height:u},e("resize",r))}}const{proxy:l}=P();if(l.trigger=s,M===!0){let a;const u=h=>{n=l.$el.parentNode,n?(a=new ResizeObserver(s),a.observe(n),i()):h!==!0&&m(()=>{u(!0)})};return w(()=>{u()}),E(()=>{t!==null&&clearTimeout(t),a!==void 0&&(a.disconnect!==void 0?a.disconnect():n&&a.unobserve(n))}),W}else{let a=function(){t!==null&&(clearTimeout(t),t=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",s,F.passive),d=void 0)},u=function(){a(),n&&n.contentDocument&&(d=n.contentDocument.defaultView,d.addEventListener("resize",s,F.passive),i())};const{isHydrated:h}=oe();let d;return w(()=>{m(()=>{n=l.$el,n&&u()})}),E(a),()=>{if(h.value===!0)return K("object",{class:"q--avoid-card-border",style:N.style,tabindex:-1,type:"text/html",data:N.url,"aria-hidden":"true",onLoad:u})}}}}),ne=[Element,String],re=[null,document,document.body,document.scrollingElement,document.documentElement];function se(o,e){let t=Z(e);if(t===void 0){if(o==null)return window;t=o.closest(".scroll,.scroll-y,.overflow-auto")}return re.includes(t)?window:t}function Y(o){return o===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:o.scrollTop}function V(o){return o===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:o.scrollLeft}function z(o,e,t=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=Y(o);if(t<=0){r!==e&&T(o,e);return}requestAnimationFrame(s=>{const i=s-n,l=r+(e-r)/Math.max(i,t)*i;T(o,l),l!==e&&z(o,e,t-i,s)})}function j(o,e,t=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=V(o);if(t<=0){r!==e&&L(o,e);return}requestAnimationFrame(s=>{const i=s-n,l=r+(e-r)/Math.max(i,t)*i;L(o,l),l!==e&&j(o,e,t-i,s)})}function T(o,e){if(o===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e);return}o.scrollTop=e}function L(o,e){if(o===window){window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}o.scrollLeft=e}function ve(o,e,t){if(t){z(o,e,t);return}T(o,e)}function Re(o,e,t){if(t){j(o,e,t);return}L(o,e)}let y;function ye(){if(y!==void 0)return y;const o=document.createElement("p"),e=document.createElement("div");S(o,{width:"100%",height:"200px"}),S(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(o),document.body.appendChild(e);const t=o.offsetWidth;e.style.overflow="scroll";let n=o.offsetWidth;return t===n&&(n=e.clientWidth),e.remove(),y=t-n,y}function we(o,e=!0){return!o||o.nodeType!==Node.ELEMENT_NODE?!1:e?o.scrollHeight>o.clientHeight&&(o.classList.contains("scroll")||o.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(o)["overflow-y"])):o.scrollWidth>o.clientWidth&&(o.classList.contains("scroll")||o.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(o)["overflow-x"]))}const{passive:J}=F,ae=["both","horizontal","vertical"],Ce=D({name:"QScrollObserver",props:{axis:{type:String,validator:o=>ae.includes(o),default:"vertical"},debounce:[String,Number],scrollTarget:ne},emits:["scroll"],setup(o,{emit:e}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,r,s;O(()=>o.scrollTarget,()=>{a(),l()});function i(){n!==null&&n();const d=Math.max(0,Y(r)),I=V(r),x={top:d-t.position.top,left:I-t.position.left};if(o.axis==="vertical"&&x.top===0||o.axis==="horizontal"&&x.left===0)return;const G=Math.abs(x.top)>=Math.abs(x.left)?x.top<0?"up":"down":x.left<0?"left":"right";t.position={top:d,left:I},t.directionChanged=t.direction!==G,t.delta=x,t.directionChanged===!0&&(t.direction=G,t.inflectionPoint=t.position),e("scroll",{...t})}function l(){r=se(s,o.scrollTarget),r.addEventListener("scroll",u,J),u(!0)}function a(){r!==void 0&&(r.removeEventListener("scroll",u,J),r=void 0)}function u(d){if(d===!0||o.debounce===0||o.debounce==="0")i();else if(n===null){const[I,x]=o.debounce?[setTimeout(i,o.debounce),clearTimeout]:[requestAnimationFrame(i),cancelAnimationFrame];n=()=>{x(I),n=null}}}const{proxy:h}=P();return O(()=>h.$q.lang.rtl,i),w(()=>{s=h.$el.parentNode,l()}),E(()=>{n!==null&&n(),a()}),Object.assign(h,{trigger:u,getPosition:()=>t}),W}});function Be(){return ee(te)}const Ee=async(o,e)=>{await m(),o.value[e]?.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},me=o=>new Promise(e=>setTimeout(e,o));function ie(o,e){const t=Object.values(o).find(n=>n.value===e);return t||null}const _=o=>{if(typeof o!="string")throw new Error("Input must be a string");if(o.length%2!==0)throw new Error("Input must have an even number of characters");const e=new Uint8Array(o.length/2);for(let t=0;t<o.length;t+=2){const n=parseInt(o.substring(t,t+2),16);if(isNaN(n))throw new Error(`Invalid hex character at position ${t}: ${o.substring(t,t+2)}`);e[t/2]=n}return e},C=o=>{o=o.replace("#","");const e=parseInt(o.substring(0,2),16),t=parseInt(o.substring(2,4),16),n=parseInt(o.substring(4,6),16);return{r:e,g:t,b:n}},Fe=(o,e,t)=>"#"+((o<<16)+(e<<8)+t).toString(16).padStart(6,"0"),le=(o,e)=>{if(!(o instanceof Uint8Array)||!(e instanceof Uint8Array))throw new Error("Both source and target must be Uint8Array");for(let t=0;t<=o.length-e.length;t++)if(e.every((n,r)=>o[t+r]===n))return!0;return!1},A=o=>o.reduce((e,t)=>e+t,0)&255,f=o=>{const e=[];let t=0;for(const s of o){const{type:i,length:l,value:a}=s;if(i<0||i>255)throw new Error("Type must be between 0 and 255");if(l<0||l>255)throw new Error("itemLength must be between 0 and 255");if(l>0){if(a.length!==l)throw new Error("Value length does not match specified length");if(!(a instanceof Uint8Array))throw new Error("Value must be a Uint8Array")}const u=new Uint8Array(2+l);u[0]=i,u[1]=l,l>0&&u.set(a,2),e.push(u),t+=u.length}const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return{length:t,buffer:n}},Te=o=>{if(!(o instanceof Uint8Array))throw new Error("Input must be a Uint8Array");const e=[];let t=0;for(;t<o.length;){const n=o[t++];if(t>=o.length)throw new Error("Unexpected end of buffer");let r=o[t++];if(r<0||r>255)throw new Error("Length must be between 0 and 255");if(t+r>o.length)throw new Error("Unexpected end of buffer");const s=o.slice(t,t+r);e.push({type:n,length:r,value:s}),t+=r}if(t!==o.length)throw new Error("Not all data was consumed");return e};class ce{constructor(){this.port=null,this.reader=null,this.writer=null,this.readPointer=0,this.isConnected=!1,this.receiveBuffer=new Uint8Array,this.callbacks={receive:[],error:null,stateChange:null}}on(e,t){return e==="receive"?this.callbacks.receive.push(t):e in this.callbacks&&(this.callbacks[e]=t),this}off(e,t){return e==="receive"?this.callbacks.receive=this.callbacks.receive.filter(n=>n!==t):e in this.callbacks&&(this.callbacks[e]=null),this}static isSupported(){return"serial"in navigator}async connect(e={baudRate:115200}){try{return this.port=await navigator.serial.requestPort(),await this.port.open(e),this.isConnected=!0,this._triggerStateChange(),this._startReading(),!0}catch(t){return this._handleError(t),!1}}async disconnect(){try{return this.reader&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close(),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close(),this.port=null),this.isConnected=!1,this._triggerStateChange(),!0}catch(e){throw new Error("Disconnect failed with error: "+e.message)}}clearBuffer(){this.receiveBuffer=new Uint8Array,this.readPointer=0}async sendRawData(e){if(!this.isConnected)return!1;try{return this.writer=this.port.writable.getWriter(),await this.writer.write(e),!0}catch(t){return this._handleError(t),!1}finally{this.writer&&(this.writer.releaseLock(),this.writer=null)}}async sendHex(e){return this.sendRawData(_(e))}async sendText(e){return this.sendRawData(new TextEncoder().encode(e))}async validateDevice({queryCommand:e,response:t,timeout:n=1e3}){if(!this.isConnected)throw new Error("Device not connected");const r=this.receiveBuffer.length;return new Promise(s=>{const i=setTimeout(()=>{this.off("receive",l),s({result:!1,reason:"Timeout"})},n),l=()=>{const a=this.receiveBuffer.slice(r);le(a,t)&&(clearTimeout(i),this.off("receive",l),s({result:!0}))};this.on("receive",l),this.sendRawData(e)})}async _startReading(){try{for(this.reader=this.port.readable.getReader();;){const{value:e,done:t}=await this.reader.read();if(t)break;this.receiveBuffer=new Uint8Array([...this.receiveBuffer,...e]);const n=this.receiveBuffer.slice(this.readPointer);this.callbacks.receive.forEach(r=>r(n)),this.readPointer=this.receiveBuffer.length}}catch(e){this._handleError(e)}finally{this.reader.releaseLock()}}_triggerStateChange(){this.callbacks.stateChange&&this.callbacks.stateChange(this.isConnected)}async _handleError(e){console.error("SerialManager Error:",e),this.callbacks.error&&this.callbacks.error({type:"serial",message:e.message,stack:e.stack});try{await this.disconnect()}catch(t){console.error("Disconnect Error:",t),alert("Something went wrong, please refresh the page and try again.")}}}const Le=H("serialData",()=>{const o=g(new ce),e=g(null),t=g(null),n=g(!1),r=()=>{o.value.on("receive",i).on("error",a=>{a.value=a,console.log("err",a)})},s=async a=>(o.value.clearBuffer(),o.value.sendHex(a)),i=a=>{e.value=a};return{manager:o,receiveData:e,err:t,isConnected:n,setIsConnected:a=>{n.value=a},init:r,sendHex:s}}),ue={Horn:{separator:!0,value:1,hasFunction:!0,hasColor:!1},L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS2:{separator:!1,value:33,hasFunction:!0,hasColor:!1},RS1:{separator:!1,value:40,hasFunction:!0,hasColor:!1},RS2:{separator:!1,value:41,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},_e=ue,Ge={L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},L5:{separator:!1,value:20,hasFunction:!0,hasColor:!0},L6:{separator:!1,value:21,hasFunction:!1,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},R5:{separator:!1,value:28,hasFunction:!0,hasColor:!0},R6:{separator:!1,value:29,hasFunction:!1,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS_CW:{separator:!0,value:36,hasFunction:!0,hasColor:!1},LS_CCW:{separator:!1,value:37,hasFunction:!0,hasColor:!1},RS1:{separator:!0,value:40,hasFunction:!0,hasColor:!1},RS_CW:{separator:!0,value:44,hasFunction:!0,hasColor:!1},RS_CCW:{separator:!1,value:45,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},be={separator:!0,value:1,hasFunction:!0,hasColor:!1};class R{constructor(e){this.buffer=e,this.buttons={Horn:{inputIndex:e[24],bufferIndex:24},L1:{inputIndex:e[25],bufferIndex:25,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[26],bufferIndex:26,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[27],bufferIndex:27,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[28],bufferIndex:28,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},R1:{inputIndex:e[29],bufferIndex:29,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},R2:{inputIndex:e[30],bufferIndex:30,colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R3:{inputIndex:e[31],bufferIndex:31,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R4:{inputIndex:e[32],bufferIndex:32,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},LS1:{inputIndex:e[33],bufferIndex:33},LS2:{inputIndex:e[34],bufferIndex:34},RS1:{inputIndex:e[35],bufferIndex:35},RS2:{inputIndex:e[36],bufferIndex:36},LJoystick_UP:{inputIndex:e[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:e[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:e[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:e[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:e[41],bufferIndex:41},LJoystick_CW:{inputIndex:e[42],bufferIndex:42},LJoystick_CCW:{inputIndex:e[43],bufferIndex:43},RJoystick_UP:{inputIndex:e[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:e[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:e[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:e[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:e[48],bufferIndex:48},RJoystick_CW:{inputIndex:e[49],bufferIndex:49},RJoystick_CCW:{inputIndex:e[50],bufferIndex:50}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,t=null,n=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(t===null&&n===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(t&&(r.inputIndex=t,this.buffer[r.bufferIndex]=t),n){const s=C(n);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const t=[];for(let n=0;n<e.length;n+=51){const r=e.slice(n,n+51);t.push(new R(r))}return t}}class de{constructor(e){this.buffer=e,this.buttons={Horn:{inputIndex:e[24],bufferIndex:24},L1:{inputIndex:e[25],bufferIndex:25,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[26],bufferIndex:26,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[27],bufferIndex:27,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[28],bufferIndex:28,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},R1:{inputIndex:e[29],bufferIndex:29,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},R2:{inputIndex:e[30],bufferIndex:30,colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R3:{inputIndex:e[31],bufferIndex:31,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R4:{inputIndex:e[32],bufferIndex:32,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},LS1:{inputIndex:e[33],bufferIndex:33},LS2:{inputIndex:e[34],bufferIndex:34},RS1:{inputIndex:e[35],bufferIndex:35},RS2:{inputIndex:e[36],bufferIndex:36},LJoystick_UP:{inputIndex:e[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:e[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:e[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:e[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:e[41],bufferIndex:41},LJoystick_CW:{inputIndex:e[42],bufferIndex:42},LJoystick_CCW:{inputIndex:e[43],bufferIndex:43},RJoystick_UP:{inputIndex:e[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:e[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:e[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:e[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:e[48],bufferIndex:48},RJoystick_CW:{inputIndex:e[49],bufferIndex:49},RJoystick_CCW:{inputIndex:e[50],bufferIndex:50}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,t=null,n=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(t===null&&n===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(t&&(r.inputIndex=t,this.buffer[r.bufferIndex]=t),n){const s=C(n);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const t=[];for(let n=0;n<e.length;n+=51){const r=e.slice(n,n+51);t.push(new R(r))}return t}}class he{constructor(e){this.buffer=e,this.buttons={L1:{inputIndex:e[36],bufferIndex:36,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[37],bufferIndex:37,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[38],bufferIndex:38,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[39],bufferIndex:39,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},L5:{inputIndex:e[40],bufferIndex:40,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},L6:{colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R1:{inputIndex:e[41],bufferIndex:41,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R2:{inputIndex:e[42],bufferIndex:42,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},R3:{inputIndex:e[43],bufferIndex:43,colorR:e[24],colorRIndex:24,colorG:e[25],colorGIndex:25,colorB:e[26],colorBIndex:26},R4:{inputIndex:e[44],bufferIndex:44,colorR:e[27],colorRIndex:27,colorG:e[28],colorGIndex:28,colorB:e[29],colorBIndex:29},R5:{inputIndex:e[45],bufferIndex:45,colorR:e[30],colorRIndex:30,colorG:e[31],colorGIndex:31,colorB:e[32],colorBIndex:32},R6:{colorR:e[33],colorRIndex:33,colorG:e[34],colorGIndex:34,colorB:e[35],colorBIndex:35},LS1:{inputIndex:e[46],bufferIndex:46},LS_CW:{inputIndex:e[47],bufferIndex:47},LS_CCW:{inputIndex:e[48],bufferIndex:48},RS1:{inputIndex:e[49],bufferIndex:49},RS_CW:{inputIndex:e[50],bufferIndex:50},RS_CCW:{inputIndex:e[51],bufferIndex:51},LJoystick_UP:{inputIndex:e[52],bufferIndex:52},LJoystick_DOWN:{inputIndex:e[53],bufferIndex:53},LJoystick_LEFT:{inputIndex:e[54],bufferIndex:54},LJoystick_RIGHT:{inputIndex:e[55],bufferIndex:55},LJoystick_CENTER:{inputIndex:e[56],bufferIndex:56},LJoystick_CW:{inputIndex:e[57],bufferIndex:57},LJoystick_CCW:{inputIndex:e[58],bufferIndex:58},RJoystick_UP:{inputIndex:e[59],bufferIndex:59},RJoystick_DOWN:{inputIndex:e[60],bufferIndex:60},RJoystick_LEFT:{inputIndex:e[61],bufferIndex:61},RJoystick_RIGHT:{inputIndex:e[62],bufferIndex:62},RJoystick_CENTER:{inputIndex:e[63],bufferIndex:63},RJoystick_CW:{inputIndex:e[64],bufferIndex:64},RJoystick_CCW:{inputIndex:e[65],bufferIndex:65}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,t=null,n=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(t===null&&n===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(t&&(r.inputIndex=t,this.buffer[r.bufferIndex]=t),n){const s=C(n);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const t=[];for(let n=0;n<e.length;n+=51){const r=e.slice(n,n+51);t.push(new R(r))}return t}}const xe={PRO:{label:"PRO",value:1},AIR:{label:"AIR",value:2},GT:{label:"GT",value:3}},ke=H("hubConfig",{state:()=>({isAvailable:!1,modelByte:0,lastBridgeConnCarVendorByte:0,majorVersionByte:0,minorVersionByte:0,patchVersionByte:0,profileByte:0,buttonDayBrightness:0,buttonNightBrightness:0,rpmDayBrightness:0,rpmNightBrightness:0,buttonConfig:null}),actions:{setIsAvailable(o){this.isAvailable=o},setInfo(o){if(!(o instanceof Uint8Array)){console.error("infoArray is not Uint8Array");return}this.modelByte=o[0],this.lastBridgeConnCarVendorByte=o[1],this.majorVersionByte=o[2]>>4,this.minorVersionByte=o[2]&15,this.patchVersionByte=o[3]},setProfile(o){if(!(o instanceof Uint8Array)){console.error("profileArray is not Uint8Array");return}this.profileByte=o[0]},setBrightness(o){if(!(o instanceof Uint8Array)){console.error("brightnessArray is not Uint8Array");return}this.buttonDayBrightness=Math.floor(o[0]/2.55),this.buttonNightBrightness=Math.floor(o[1]/2.55),this.rpmDayBrightness=Math.floor(o[2]/2.55),this.rpmNightBrightness=Math.floor(o[3]/2.55)},setAllButtonConfig(o){if(!(o instanceof Uint8Array)){console.error("buttonConfigArray is not Uint8Array");return}switch(ie(xe,this.modelByte).label){case"PRO":this.buttonConfig=new R(o);break;case"AIR":this.buttonConfig=new de(o);break;case"GT":this.buttonConfig=new he(o);break}this.isAvailable=!0}},getters:{}});var v;const c=class c{static verify(e){if(!(e instanceof Uint8Array))throw new Error("Frame must be a Uint8Array");const t=_(B(c,v));if(e[0]!==t[0]||e[1]!==t[1])throw new Error("Invalid frame header");const n=e.slice(0,-1);if(A(n)!==e[e.length-1])throw new Error("Invalid checksum");return{cmd:e[2],data:e.slice(5,-1)}}static generateFrame(e,t){const n=_(B(c,v)),r=t.length,s=new Uint8Array(6+r);s[0]=n[0],s[1]=n[1],s[2]=e,s[3]=r>>8&255,s[4]=r&255,s.set(t,5);const i=A(s.slice(0,-1));return s[s.length-1]=i,s}static generateValidateFrame(e){if(!Object.hasOwn(c.SOURCE_BYTE,e))throw new Error("Invalid source byte");const t=c.SOURCE_BYTE[e],n={type:c.TLV_TYPE.SOURCE,length:1,value:new Uint8Array([t])},{buffer:r}=f([n]);return this.generateFrame(c.CMD_BYTE.VALIDATE,r)}static generateFetchInfoFrame(){const e=[{type:c.CONFIG_BYTE.INFO,length:0,value:null},{type:c.CONFIG_BYTE.PROFILE,length:0,value:null},{type:c.CONFIG_BYTE.BRIGHTNESS,length:0,value:null},{type:c.CONFIG_BYTE.BUTTON,length:0,value:null}],{buffer:t}=f(e);return this.generateFrame(c.CMD_BYTE.GET_CONFIG,t)}static generateSetProfileFrame(e){const t=[{type:c.CONFIG_BYTE.PROFILE,length:1,value:new Uint8Array([e])}],{buffer:n}=f(t);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,n)}static generateSetBrightnessFrame(e=null,t=null){let n=255;t!==null&&(t<0&&(t=0),t>100&&(t=100),n=Math.round(t*2.55));const r=[{type:c.CONFIG_BYTE.BRIGHTNESS,length:2,value:new Uint8Array([e,n])}],{buffer:s}=f(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,s)}static generateSetButtonDayBrightnessFrame(e=null){return this.generateSetBrightnessFrame(1,e)}static generateSetButtonNightBrightnessFrame(e=null){return this.generateSetBrightnessFrame(2,e)}static generateSetRpmDayBrightnessFrame(e=null){return this.generateSetBrightnessFrame(4,e)}static generateSetRpmNightBrightnessFrame(e=null){return this.generateSetBrightnessFrame(8,e)}static generateEnableBrightnessFrame(e,t){let n=0;e===0&&(n|=1),t===0&&(n|=2);const r=[{type:c.CONFIG_BYTE.ENABLE_BRIGHTNESS,length:1,value:new Uint8Array([n])}],{buffer:s}=f(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,s)}static generateEnableDayBrightnessFrame(e){return this.generateEnableBrightnessFrame(1,e)}static generateEnableNightBrightnessFrame(e){return this.generateEnableBrightnessFrame(0,e)}static generateSetButtonFrame(e,t,n=null,r=null){if(e===null)throw new Error("buttonByte cannot be null");if(t===null)throw new Error("profileByte cannot be null");if(n===null&&r===null)throw new Error("func and rgb cannot be null at the same time");let s=0,i=255,l=255,a=255,u=255;if(n!==null&&(s|=1,i=n),r!==null){s|=2;const I=C(r);l=I.r,a=I.g,u=I.b}const h=[{type:c.CONFIG_BYTE.BUTTON,length:7,value:new Uint8Array([e,t,s&255,i,l,a,u])}],{buffer:d}=f(h);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,d)}};v=new WeakMap,k(c,v,"5043"),p(c,"CMD_BYTE",{VALIDATE:0,GET_CONFIG:2,SET_CONFIG:3}),p(c,"TLV_TYPE",{SOURCE:1,CONFIG:2}),p(c,"SOURCE_BYTE",{OK:0,WEBSITE:1,APP:2,EXIT:250,FACTORY:252,FAIL:255}),p(c,"CONFIG_BYTE",{INFO:0,PROFILE:1,BRIGHTNESS:2,BUTTON:3,ENABLE_BRIGHTNESS:4});let U=c;const Se=(o,e)=>{const t=o.__vccOpts||o;for(const[n,r]of e)t[n]=r;return t};export{_e as A,be as D,Ge as G,xe as H,ue as P,ge as Q,Fe as R,U,Se as _,Ce as a,ke as b,Be as c,me as d,ve as e,V as f,ye as g,Y as h,we as i,Ee as j,ne as k,se as l,ie as m,Re as s,Te as t,Le as u};
