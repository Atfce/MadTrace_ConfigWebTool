import{c as R,a as m,h as S,b as A,g as F,i as U,e as L,l as G,r as _,w as I,o as oe,d as se,p as ie,f as re,j as ue,k as V,m as ce,n as de,q as j,s as fe,t as ve,u as he,v as le,x as E,y as D,z as me,A as ge,B as pe,C as we,D as ye,E as O,F as be,G as W,H as J,I as z,Q as Se,J as Ce,K as X,L as Z}from"./index-CXh_i1Mg.js";import{Q as $,g as Q,a as _e,_ as xe,u as ze,b as Ie,c as Te,U as C,d as q,t as ee}from"./_plugin-vue_export-helper-DsdV--j-.js";import"./pinia-DPTisiPK.js";const We=R({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:n}){const o=m(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>S("div",{class:o.value},A(n.default))}}),Be=R({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:n}){const o=m(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>S("div",{class:o.value,role:"toolbar"},A(n.default))}}),Le=R({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:n,emit:o}){const{proxy:{$q:a}}=F(),i=U(G,L);if(i===L)return console.error("QHeader needs to be child of QLayout"),L;const c=_(parseInt(e.heightHint,10)),d=_(!0),r=m(()=>e.reveal===!0||i.view.value.indexOf("H")!==-1||a.platform.is.ios&&i.isContainer.value===!0),l=m(()=>{if(e.modelValue!==!0)return 0;if(r.value===!0)return d.value===!0?c.value:0;const t=c.value-i.scroll.value.position;return t>0?t:0}),s=m(()=>e.modelValue!==!0||r.value===!0&&d.value!==!0),h=m(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),y=m(()=>"q-header q-layout__section--marginal "+(r.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),b=m(()=>{const t=i.rows.value.top,f={};return t[0]==="l"&&i.left.space===!0&&(f[a.lang.rtl===!0?"right":"left"]=`${i.left.size}px`),t[2]==="r"&&i.right.space===!0&&(f[a.lang.rtl===!0?"left":"right"]=`${i.right.size}px`),f});function v(t,f){i.update("header",t,f)}function g(t,f){t.value!==f&&(t.value=f)}function H({height:t}){g(c,t),v("size",t)}function B(t){h.value===!0&&g(d,!0),o("focusin",t)}I(()=>e.modelValue,t=>{v("space",t),g(d,!0),i.animate()}),I(l,t=>{v("offset",t)}),I(()=>e.reveal,t=>{t===!1&&g(d,e.modelValue)}),I(d,t=>{i.animate(),o("reveal",t)}),I(i.scroll,t=>{e.reveal===!0&&g(d,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const T={};return i.instances.header=T,e.modelValue===!0&&v("size",c.value),v("space",e.modelValue),v("offset",l.value),oe(()=>{i.instances.header===T&&(i.instances.header=void 0,v("size",0),v("offset",0),v("space",!1))}),()=>{const t=se(n.default,[]);return e.elevated===!0&&t.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(S($,{debounce:0,onResize:H})),S("header",{class:y.value,style:b.value,onFocusin:B},t)}}}),Ee=R({name:"QPageContainer",setup(e,{slots:n}){const{proxy:{$q:o}}=F(),a=U(G,L);if(a===L)return console.error("QPageContainer needs to be child of QLayout"),L;ie(re,!0);const i=m(()=>{const c={};return a.header.space===!0&&(c.paddingTop=`${a.header.size}px`),a.right.space===!0&&(c[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${a.right.size}px`),a.footer.space===!0&&(c.paddingBottom=`${a.footer.size}px`),a.left.space===!0&&(c[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${a.left.size}px`),c});return()=>S("div",{class:"q-page-container",style:i.value},A(n.default))}}),De=R({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:n,emit:o}){const{proxy:{$q:a}}=F(),i=_(null),c=_(a.screen.height),d=_(e.container===!0?0:a.screen.width),r=_({position:0,direction:"down",inflectionPoint:0}),l=_(0),s=_(ue.value===!0?0:Q()),h=m(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),y=m(()=>e.container===!1?{minHeight:a.screen.height+"px"}:null),b=m(()=>s.value!==0?{[a.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),v=m(()=>s.value!==0?{[a.lang.rtl===!0?"right":"left"]:0,[a.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function g(u){if(e.container===!0||document.qScrollPrevented!==!0){const w={position:u.position.top,direction:u.direction,directionChanged:u.directionChanged,inflectionPoint:u.inflectionPoint.top,delta:u.delta.top};r.value=w,e.onScroll!==void 0&&o("scroll",w)}}function H(u){const{height:w,width:x}=u;let p=!1;c.value!==w&&(p=!0,c.value=w,e.onScrollHeight!==void 0&&o("scrollHeight",w),T()),d.value!==x&&(p=!0,d.value=x),p===!0&&e.onResize!==void 0&&o("resize",u)}function B({height:u}){l.value!==u&&(l.value=u,T())}function T(){if(e.container===!0){const u=c.value>l.value?Q():0;s.value!==u&&(s.value=u)}}let t=null;const f={instances:{},view:m(()=>e.view),isContainer:m(()=>e.container),rootRef:i,height:c,containerHeight:l,scrollbarWidth:s,totalWidth:m(()=>d.value+s.value),rows:m(()=>{const u=e.view.toLowerCase().split(" ");return{top:u[0].split(""),middle:u[1].split(""),bottom:u[2].split("")}}),header:V({size:0,offset:0,space:!1}),right:V({size:300,offset:0,space:!1}),footer:V({size:0,offset:0,space:!1}),left:V({size:300,offset:0,space:!1}),scroll:r,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(u,w,x){f[u][w]=x}};if(ie(G,f),Q()>0){let u=function(){p=null,P.classList.remove("hide-scrollbar")},w=function(){if(p===null){if(P.scrollHeight>a.screen.height)return;P.classList.add("hide-scrollbar")}else clearTimeout(p);p=setTimeout(u,300)},x=function(K){p!==null&&K==="remove"&&(clearTimeout(p),u()),window[`${K}EventListener`]("resize",w)},p=null;const P=document.body;I(()=>e.container!==!0?"add":"remove",x),e.container!==!0&&x("add"),ce(()=>{x("remove")})}return()=>{const u=de(n.default,[S(_e,{onScroll:g}),S($,{onResize:H})]),w=S("div",{class:h.value,style:y.value,ref:e.container===!0?void 0:i,tabindex:-1},u);return e.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:i},[S($,{onResize:B}),S("div",{class:"absolute-full",style:b.value},[S("div",{class:"scroll",style:v.value},[w])])]):w}}}),Fe="/MadTrace_ConfigWebTool/assets/logo-B6iLVUnQ.png";function He(e){return ve()?(he(e),!0):!1}const M=new WeakMap,Oe=(...e)=>{var n;const o=e[0],a=(n=F())==null?void 0:n.proxy;if(a==null&&!le())throw new Error("injectLocal must be called in setup");return a&&M.has(a)&&o in M.get(a)?M.get(a)[o]:U(...e)},Re=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ve=Object.prototype.toString,qe=e=>Ve.call(e)==="[object Object]";function te(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function k(e){return Array.isArray(e)?e:[e]}function Pe(e){return F()}function Qe(e,n=!0,o){Pe()?j(e,o):n?e():fe(e)}function Me(e,n,o){return I(e,n,{...o,immediate:!0})}const Y=Re?window:void 0;function ke(e){var n;const o=D(e);return(n=o?.$el)!=null?n:o}function N(...e){const n=[],o=()=>{n.forEach(r=>r()),n.length=0},a=(r,l,s,h)=>(r.addEventListener(l,s,h),()=>r.removeEventListener(l,s,h)),i=m(()=>{const r=k(D(e[0])).filter(l=>l!=null);return r.every(l=>typeof l!="string")?r:void 0}),c=Me(()=>{var r,l;return[(l=(r=i.value)==null?void 0:r.map(s=>ke(s)))!=null?l:[Y].filter(s=>s!=null),k(D(i.value?e[1]:e[0])),k(ge(i.value?e[2]:e[1])),D(i.value?e[3]:e[2])]},([r,l,s,h])=>{if(o(),!r?.length||!l?.length||!s?.length)return;const y=qe(h)?{...h}:h;n.push(...r.flatMap(b=>l.flatMap(v=>s.map(g=>a(b,v,g,y)))))},{flush:"post"}),d=()=>{c(),o()};return He(o),d}function $e(){const e=E(!1),n=F();return n&&j(()=>{e.value=!0},n),e}function Ne(e){const n=$e();return m(()=>(n.value,!!e()))}const Ae=Symbol("vueuse-ssr-width");function Ue(){const e=le()?Oe(Ae,null):null;return typeof e=="number"?e:void 0}function Ge(e,n={}){const{window:o=Y,ssrWidth:a=Ue()}=n,i=Ne(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function"),c=E(typeof a=="number"),d=E(),r=E(!1),l=s=>{r.value=s.matches};return me(()=>{if(c.value){c.value=!i.value;const s=D(e).split(",");r.value=s.some(h=>{const y=h.includes("not all"),b=h.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),v=h.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let g=!!(b||v);return b&&g&&(g=a>=te(b[1])),v&&g&&(g=a<=te(v[1])),y?!g:g});return}i.value&&(d.value=o.matchMedia(D(e)),r.value=d.value.matches)}),N(d,"change",l,{passive:!0}),m(()=>r.value)}function je(e={}){const{window:n=Y,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:a=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:c=!0,type:d="inner"}=e,r=E(o),l=E(a),s=()=>{if(n)if(d==="outer")r.value=n.outerWidth,l.value=n.outerHeight;else if(d==="visual"&&n.visualViewport){const{width:y,height:b,scale:v}=n.visualViewport;r.value=Math.round(y*v),l.value=Math.round(b*v)}else c?(r.value=n.innerWidth,l.value=n.innerHeight):(r.value=n.document.documentElement.clientWidth,l.value=n.document.documentElement.clientHeight)};s(),Qe(s);const h={passive:!0};if(N("resize",s,h),n&&d==="visual"&&n.visualViewport&&N(n.visualViewport,"resize",s,h),i){const y=Ge("(orientation: portrait)");I(y,()=>s())}return{width:r,height:l}}const Ye={class:"row items-center q-gutter-x-lg"},Ke={class:"content-wrapper"},Je={class:"device-warning-mask flex flex-center"},Xe={class:"window-warning-mask fixed-full flex flex-center"},ne=1280,ae=720,Ze={__name:"MainLayout",setup(e){const n=Te(),o=ze(),a=o.manager,i=Ie(),c=_(!1),d=_(!1),r=m(()=>d.value?c.value?"Disconnecting":"Connecting...":c.value?"Disconnect":"Connect");let l=new Uint8Array(0);async function s(){d.value=!0;try{c.value?await b():await y()}catch(t){console.error(t)}finally{d.value=!1}}function h(t){const f=t instanceof Uint8Array?t:new Uint8Array(t),u=new Uint8Array(l.length+f.length);u.set(l,0),u.set(f,l.length),l=u}async function y(){if(await a.connect({baudRate:25e4})){const f=await a.validateDevice({queryCommand:C.generateValidateFrame("WEBSITE"),response:C.generateValidateFrame("OK"),timeout:200});f.result===!0?(await q(10),await v(),c.value=!0,n.notify("device connected")):(a.disconnect(),c.value=!1,n.notify(`device invalidated: ${f.reason}`))}else{n.notify("Failed to open serial port");return}}async function b(){let t=C.generateEnableDayBrightnessFrame(0);a.sendRawData(t),await q(10),t=C.generateValidateFrame("EXIT"),a.sendRawData(t),i.setIsAvailable(!1),await q(30),await a.disconnect()&&(n.notify("device disconnected"),c.value=!1)}async function v(){a.off("receive",h),l=new Uint8Array(0),a.on("receive",h);const t=C.generateFetchInfoFrame();a.sendRawData(t),await q(50);let f=null,u=null;if(({cmd:u,data:f}=C.verify(l))===null){a.disconnect(),n.notify("device invalidated");return}if(u===C.CMD_BYTE.GET_CONFIG){let w=ee(f),x=ee(w[0].value);for(const p of x)switch(p.type){case C.CONFIG_BYTE.INFO:i.setInfo(p.value);break;case C.CONFIG_BYTE.PROFILE:i.setProfile(p.value);break;case C.CONFIG_BYTE.BRIGHTNESS:i.setBrightness(p.value);break;case C.CONFIG_BYTE.BUTTON:i.setAllButtonConfig(p.value);break;case C.CONFIG_BYTE.RPM:i.setRpmConfig(p.value);break}}a.off("receive",h)}const{width:g,height:H}=je(),B=_(!1),T=pe(()=>{if(!n.platform.is.edge&&!n.platform.is.chrome&&!n.platform.is.edgeChromium){alert("Please use a compatible browser(chrome)).");return}B.value=g.value<ne||H.value<ae},100);return oe(()=>{window.removeEventListener("resize",T)}),j(()=>{"serial"in navigator?console.log("Web Serial API supported."):alert("Web Serial API not supported. Please use a compatible browser(chrome))."),o.init(),window.addEventListener("resize",T),I(()=>c.value,t=>{o.setIsConnected(t)})}),(t,f)=>{const u=be("router-view");return ye(),we(De,{view:"hHh Lpr lFr"},{default:O(()=>[W(Le,{elevated:"",class:"bg-black"},{default:O(()=>[W(Be,null,{default:O(()=>[W(We,null,{default:O(()=>f[0]||(f[0]=[z("img",{src:Fe,alt:"Madtrace",class:"logo"},null,-1)])),_:1}),z("div",Ye,[W(Se,{name:"circle",size:"18px",color:c.value?"green":"red",class:"serial-indicater"},null,8,["color"]),W(Ce,{class:"bg-white text-black",label:r.value,onClick:s,loading:d.value,disable:d.value},null,8,["label","loading","disable"])])]),_:1})]),_:1}),W(Ee,null,{default:O(()=>[z("div",Ke,[W(u),J(z("div",Je,f[1]||(f[1]=[z("div",{class:"warning-content text-center q-pa-lg"},[z("p",{class:"text-body1"},"Please connect device first.")],-1)]),512),[[X,!c.value]])])]),_:1}),J(z("div",Xe,[z("div",{class:"warning-content text-center q-pa-lg"},[z("p",{class:"text-body1"},"Please Resize Window atleast "+Z(ne)+" x "+Z(ae)+".")])],512),[[X,B.value]])]),_:1})}}},at=xe(Ze,[["__scopeId","data-v-33499d2e"]]);export{at as default};
