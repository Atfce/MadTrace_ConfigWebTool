var X=Object.defineProperty;var G=t=>{throw TypeError(t)};var q=(t,e,o)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var f=(t,e,o)=>q(t,typeof e!="symbol"?e+"":e,o),$=(t,e,o)=>e.has(t)||G("Cannot "+o);var w=(t,e,o)=>($(t,e,"read from private field"),o?o.call(t):e.get(t)),b=(t,e,o)=>e.has(t)?G("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o);import{r as g,j as Q,q as y,c as A,g as D,o as m,W,s as E,h as K,a4 as F,aF as Z,aG as k,w as O,i as ee,aH as te}from"./index-Di_u8Awl.js";import{d as H}from"./pinia-DC4dcVgj.js";function oe(){const t=g(!Q.value);return t.value===!1&&y(()=>{t.value=!0}),{isHydrated:t}}const M=typeof ResizeObserver<"u",N=M===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},ge=A({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:e}){let o=null,n,r={width:-1,height:-1};function s(a){a===!0||t.debounce===0||t.debounce==="0"?l():o===null&&(o=setTimeout(l,t.debounce))}function l(){if(o!==null&&(clearTimeout(o),o=null),n){const{offsetWidth:a,offsetHeight:u}=n;(a!==r.width||u!==r.height)&&(r={width:a,height:u},e("resize",r))}}const{proxy:i}=D();if(i.trigger=s,M===!0){let a;const u=d=>{n=i.$el.parentNode,n?(a=new ResizeObserver(s),a.observe(n),l()):d!==!0&&E(()=>{u(!0)})};return y(()=>{u()}),m(()=>{o!==null&&clearTimeout(o),a!==void 0&&(a.disconnect!==void 0?a.disconnect():n&&a.unobserve(n))}),W}else{let a=function(){o!==null&&(clearTimeout(o),o=null),h!==void 0&&(h.removeEventListener!==void 0&&h.removeEventListener("resize",s,F.passive),h=void 0)},u=function(){a(),n&&n.contentDocument&&(h=n.contentDocument.defaultView,h.addEventListener("resize",s,F.passive),l())};const{isHydrated:d}=oe();let h;return y(()=>{E(()=>{n=i.$el,n&&u()})}),m(a),()=>{if(d.value===!0)return K("object",{class:"q--avoid-card-border",style:N.style,tabindex:-1,type:"text/html",data:N.url,"aria-hidden":"true",onLoad:u})}}}}),ne=[Element,String],re=[null,document,document.body,document.scrollingElement,document.documentElement];function se(t,e){let o=Z(e);if(o===void 0){if(t==null)return window;o=t.closest(".scroll,.scroll-y,.overflow-auto")}return re.includes(o)?window:o}function Y(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function V(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function z(t,e,o=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=Y(t);if(o<=0){r!==e&&T(t,e);return}requestAnimationFrame(s=>{const l=s-n,i=r+(e-r)/Math.max(l,o)*l;T(t,i),i!==e&&z(t,e,o-l,s)})}function j(t,e,o=0){const n=arguments[3]===void 0?performance.now():arguments[3],r=V(t);if(o<=0){r!==e&&S(t,e);return}requestAnimationFrame(s=>{const l=s-n,i=r+(e-r)/Math.max(l,o)*l;S(t,i),i!==e&&j(t,e,o-l,s)})}function T(t,e){if(t===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e);return}t.scrollTop=e}function S(t,e){if(t===window){window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}t.scrollLeft=e}function Re(t,e,o){if(o){z(t,e,o);return}T(t,e)}function Ce(t,e,o){if(o){j(t,e,o);return}S(t,e)}let B;function ve(){if(B!==void 0)return B;const t=document.createElement("p"),e=document.createElement("div");k(t,{width:"100%",height:"200px"}),k(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const o=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return o===n&&(n=e.clientWidth),e.remove(),B=o-n,B}function Be(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}const{passive:J}=F,ae=["both","horizontal","vertical"],ye=A({name:"QScrollObserver",props:{axis:{type:String,validator:t=>ae.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:ne},emits:["scroll"],setup(t,{emit:e}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,r,s;O(()=>t.scrollTarget,()=>{a(),i()});function l(){n!==null&&n();const h=Math.max(0,Y(r)),I=V(r),x={top:h-o.position.top,left:I-o.position.left};if(t.axis==="vertical"&&x.top===0||t.axis==="horizontal"&&x.left===0)return;const _=Math.abs(x.top)>=Math.abs(x.left)?x.top<0?"up":"down":x.left<0?"left":"right";o.position={top:h,left:I},o.directionChanged=o.direction!==_,o.delta=x,o.directionChanged===!0&&(o.direction=_,o.inflectionPoint=o.position),e("scroll",{...o})}function i(){r=se(s,t.scrollTarget),r.addEventListener("scroll",u,J),u(!0)}function a(){r!==void 0&&(r.removeEventListener("scroll",u,J),r=void 0)}function u(h){if(h===!0||t.debounce===0||t.debounce==="0")l();else if(n===null){const[I,x]=t.debounce?[setTimeout(l,t.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];n=()=>{x(I),n=null}}}const{proxy:d}=D();return O(()=>d.$q.lang.rtl,l),y(()=>{s=d.$el.parentNode,i()}),m(()=>{n!==null&&n(),a()}),Object.assign(d,{trigger:u,getPosition:()=>o}),W}});function we(){return ee(te)}const me=async(t,e)=>{await E(),t.value[e]?.$el.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},Ee=t=>new Promise(e=>setTimeout(e,t));function le(t,e){const o=Object.values(t).find(n=>n.value===e);return o||null}const L=t=>{if(typeof t!="string")throw new Error("Input must be a string");if(t.length%2!==0)throw new Error("Input must have an even number of characters");const e=new Uint8Array(t.length/2);for(let o=0;o<t.length;o+=2){const n=parseInt(t.substring(o,o+2),16);if(isNaN(n))throw new Error(`Invalid hex character at position ${o}: ${t.substring(o,o+2)}`);e[o/2]=n}return e},R=t=>{t=t.replace("#","");const e=parseInt(t.substring(0,2),16),o=parseInt(t.substring(2,4),16),n=parseInt(t.substring(4,6),16);return{r:e,g:o,b:n}},Fe=(t,e,o)=>"#"+((t<<16)+(e<<8)+o).toString(16).padStart(6,"0"),ie=(t,e)=>{if(!(t instanceof Uint8Array)||!(e instanceof Uint8Array))throw new Error("Both source and target must be Uint8Array");for(let o=0;o<=t.length-e.length;o++)if(e.every((n,r)=>t[o+r]===n))return!0;return!1},P=t=>t.reduce((e,o)=>e+o,0)&255,p=t=>{const e=[];let o=0;for(const s of t){const{type:l,length:i,value:a}=s;if(l<0||l>255)throw new Error("Type must be between 0 and 255");if(i<0||i>255)throw new Error("itemLength must be between 0 and 255");if(i>0){if(a.length!==i)throw new Error("Value length does not match specified length");if(!(a instanceof Uint8Array))throw new Error("Value must be a Uint8Array")}const u=new Uint8Array(2+i);u[0]=l,u[1]=i,i>0&&u.set(a,2),e.push(u),o+=u.length}const n=new Uint8Array(o);let r=0;for(const s of e)n.set(s,r),r+=s.length;return{length:o,buffer:n}},Te=t=>{if(!(t instanceof Uint8Array))throw new Error("Input must be a Uint8Array");const e=[];let o=0;for(;o<t.length;){const n=t[o++];if(o>=t.length)throw new Error("Unexpected end of buffer");let r=t[o++];if(r<0||r>255)throw new Error("Length must be between 0 and 255");if(o+r>t.length)throw new Error("Unexpected end of buffer");const s=t.slice(o,o+r);e.push({type:n,length:r,value:s}),o+=r}if(o!==t.length)throw new Error("Not all data was consumed");return e};class ce{constructor(){this.port=null,this.reader=null,this.writer=null,this.readPointer=0,this.isConnected=!1,this.receiveBuffer=new Uint8Array,this.callbacks={receive:[],error:null,stateChange:null}}on(e,o){return e==="receive"?this.callbacks.receive.push(o):e in this.callbacks&&(this.callbacks[e]=o),this}off(e,o){return e==="receive"?this.callbacks.receive=this.callbacks.receive.filter(n=>n!==o):e in this.callbacks&&(this.callbacks[e]=null),this}static isSupported(){return"serial"in navigator}async connect(e={baudRate:115200}){try{return this.port=await navigator.serial.requestPort(),await this.port.open(e),this.isConnected=!0,this._triggerStateChange(),this._startReading(),!0}catch(o){return this._handleError(o),!1}}async disconnect(){try{return this.reader&&(await this.reader.cancel(),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close(),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close(),this.port=null),this.isConnected=!1,this._triggerStateChange(),!0}catch(e){throw new Error("Disconnect failed with error: "+e.message)}}clearBuffer(){this.receiveBuffer=new Uint8Array,this.readPointer=0}async sendRawData(e){if(!this.isConnected)return!1;try{return this.writer=this.port.writable.getWriter(),await this.writer.write(e),!0}catch(o){return this._handleError(o),!1}finally{this.writer&&(this.writer.releaseLock(),this.writer=null)}}async sendHex(e){return this.sendRawData(L(e))}async sendText(e){return this.sendRawData(new TextEncoder().encode(e))}async validateDevice({queryCommand:e,response:o,timeout:n=1e3}){if(!this.isConnected)throw new Error("Device not connected");const r=this.receiveBuffer.length;return new Promise(s=>{const l=setTimeout(()=>{this.off("receive",i),s({result:!1,reason:"Timeout"})},n),i=()=>{const a=this.receiveBuffer.slice(r);ie(a,o)&&(clearTimeout(l),this.off("receive",i),s({result:!0}))};this.on("receive",i),this.sendRawData(e)})}async _startReading(){try{for(this.reader=this.port.readable.getReader();;){const{value:e,done:o}=await this.reader.read();if(o)break;this.receiveBuffer=new Uint8Array([...this.receiveBuffer,...e]);const n=this.receiveBuffer.slice(this.readPointer);this.callbacks.receive.forEach(r=>r(n)),this.readPointer=this.receiveBuffer.length}}catch(e){this._handleError(e)}finally{this.reader.releaseLock()}}_triggerStateChange(){this.callbacks.stateChange&&this.callbacks.stateChange(this.isConnected)}async _handleError(e){console.error("SerialManager Error:",e),this.callbacks.error&&this.callbacks.error({type:"serial",message:e.message,stack:e.stack});try{await this.disconnect()}catch(o){console.error("Disconnect Error:",o),alert("Connection error, please refresh the page and try again.")}}}const Se=H("serialData",()=>{const t=g(new ce),e=g(null),o=g(null),n=g(!1),r=()=>{t.value.on("receive",l).on("error",a=>{a.value=a,console.log("err",a)})},s=async a=>(t.value.clearBuffer(),t.value.sendHex(a)),l=a=>{e.value=a};return{manager:t,receiveData:e,err:o,isConnected:n,setIsConnected:a=>{n.value=a},init:r,sendHex:s}}),ue={Horn:{separator:!0,value:1,hasFunction:!0,hasColor:!1},L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS2:{separator:!1,value:33,hasFunction:!0,hasColor:!1},RS1:{separator:!1,value:40,hasFunction:!0,hasColor:!1},RS2:{separator:!1,value:41,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Le=ue,_e={L1:{separator:!0,value:16,hasFunction:!0,hasColor:!0},L2:{separator:!1,value:17,hasFunction:!0,hasColor:!0},L3:{separator:!1,value:18,hasFunction:!0,hasColor:!0},L4:{separator:!1,value:19,hasFunction:!0,hasColor:!0},L5:{separator:!1,value:20,hasFunction:!0,hasColor:!0},L6:{separator:!1,value:21,hasFunction:!1,hasColor:!0},R1:{separator:!1,value:24,hasFunction:!0,hasColor:!0},R2:{separator:!1,value:25,hasFunction:!0,hasColor:!0},R3:{separator:!1,value:26,hasFunction:!0,hasColor:!0},R4:{separator:!1,value:27,hasFunction:!0,hasColor:!0},R5:{separator:!1,value:28,hasFunction:!0,hasColor:!0},R6:{separator:!1,value:29,hasFunction:!1,hasColor:!0},LS1:{separator:!0,value:32,hasFunction:!0,hasColor:!1},LS_CW:{separator:!0,value:36,hasFunction:!0,hasColor:!1},LS_CCW:{separator:!1,value:37,hasFunction:!0,hasColor:!1},RS1:{separator:!0,value:40,hasFunction:!0,hasColor:!1},RS_CW:{separator:!0,value:44,hasFunction:!0,hasColor:!1},RS_CCW:{separator:!1,value:45,hasFunction:!0,hasColor:!1},LJoystick_UP:{separator:!0,value:48,hasFunction:!0,hasColor:!1},LJoystick_DOWN:{separator:!1,value:49,hasFunction:!0,hasColor:!1},LJoystick_LEFT:{separator:!1,value:50,hasFunction:!0,hasColor:!1},LJoystick_RIGHT:{separator:!1,value:51,hasFunction:!0,hasColor:!1},LJoystick_CENTER:{separator:!1,value:52,hasFunction:!0,hasColor:!1},LJoystick_CW:{separator:!1,value:53,hasFunction:!0,hasColor:!1},LJoystick_CCW:{separator:!1,value:54,hasFunction:!0,hasColor:!1},RJoystick_UP:{separator:!0,value:56,hasFunction:!0,hasColor:!1},RJoystick_DOWN:{separator:!1,value:57,hasFunction:!0,hasColor:!1},RJoystick_LEFT:{separator:!1,value:58,hasFunction:!0,hasColor:!1},RJoystick_RIGHT:{separator:!1,value:59,hasFunction:!0,hasColor:!1},RJoystick_CENTER:{separator:!1,value:60,hasFunction:!0,hasColor:!1},RJoystick_CW:{separator:!1,value:61,hasFunction:!0,hasColor:!1},RJoystick_CCW:{separator:!1,value:62,hasFunction:!0,hasColor:!1}},Ge={separator:!0,value:1,hasFunction:!0,hasColor:!1};class v{constructor(e){this.buffer=e,this.buttons={Horn:{inputIndex:e[24],bufferIndex:24},L1:{inputIndex:e[25],bufferIndex:25,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[26],bufferIndex:26,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[27],bufferIndex:27,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[28],bufferIndex:28,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},R1:{inputIndex:e[29],bufferIndex:29,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},R2:{inputIndex:e[30],bufferIndex:30,colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R3:{inputIndex:e[31],bufferIndex:31,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R4:{inputIndex:e[32],bufferIndex:32,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},LS1:{inputIndex:e[33],bufferIndex:33},LS2:{inputIndex:e[34],bufferIndex:34},RS1:{inputIndex:e[35],bufferIndex:35},RS2:{inputIndex:e[36],bufferIndex:36},LJoystick_UP:{inputIndex:e[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:e[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:e[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:e[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:e[41],bufferIndex:41},LJoystick_CW:{inputIndex:e[42],bufferIndex:42},LJoystick_CCW:{inputIndex:e[43],bufferIndex:43},RJoystick_UP:{inputIndex:e[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:e[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:e[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:e[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:e[48],bufferIndex:48},RJoystick_CW:{inputIndex:e[49],bufferIndex:49},RJoystick_CCW:{inputIndex:e[50],bufferIndex:50}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,o=null,n=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(o===null&&n===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(o&&(r.inputIndex=o,this.buffer[r.bufferIndex]=o),n){const s=R(n);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const o=[];for(let n=0;n<e.length;n+=51){const r=e.slice(n,n+51);o.push(new v(r))}return o}}class de{constructor(e){this.buffer=e,this.buttons={Horn:{inputIndex:e[24],bufferIndex:24},L1:{inputIndex:e[25],bufferIndex:25,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[26],bufferIndex:26,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[27],bufferIndex:27,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[28],bufferIndex:28,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},R1:{inputIndex:e[29],bufferIndex:29,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},R2:{inputIndex:e[30],bufferIndex:30,colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R3:{inputIndex:e[31],bufferIndex:31,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R4:{inputIndex:e[32],bufferIndex:32,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},LS1:{inputIndex:e[33],bufferIndex:33},LS2:{inputIndex:e[34],bufferIndex:34},RS1:{inputIndex:e[35],bufferIndex:35},RS2:{inputIndex:e[36],bufferIndex:36},LJoystick_UP:{inputIndex:e[37],bufferIndex:37},LJoystick_DOWN:{inputIndex:e[38],bufferIndex:38},LJoystick_LEFT:{inputIndex:e[39],bufferIndex:39},LJoystick_RIGHT:{inputIndex:e[40],bufferIndex:40},LJoystick_CENTER:{inputIndex:e[41],bufferIndex:41},LJoystick_CW:{inputIndex:e[42],bufferIndex:42},LJoystick_CCW:{inputIndex:e[43],bufferIndex:43},RJoystick_UP:{inputIndex:e[44],bufferIndex:44},RJoystick_DOWN:{inputIndex:e[45],bufferIndex:45},RJoystick_LEFT:{inputIndex:e[46],bufferIndex:46},RJoystick_RIGHT:{inputIndex:e[47],bufferIndex:47},RJoystick_CENTER:{inputIndex:e[48],bufferIndex:48},RJoystick_CW:{inputIndex:e[49],bufferIndex:49},RJoystick_CCW:{inputIndex:e[50],bufferIndex:50}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,o=null,n=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(o===null&&n===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(o&&(r.inputIndex=o,this.buffer[r.bufferIndex]=o),n){const s=R(n);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const o=[];for(let n=0;n<e.length;n+=51){const r=e.slice(n,n+51);o.push(new v(r))}return o}}class he{constructor(e){this.buffer=e,this.buttons={L1:{inputIndex:e[36],bufferIndex:36,colorR:e[0],colorRIndex:0,colorG:e[1],colorGIndex:1,colorB:e[2],colorBIndex:2},L2:{inputIndex:e[37],bufferIndex:37,colorR:e[3],colorRIndex:3,colorG:e[4],colorGIndex:4,colorB:e[5],colorBIndex:5},L3:{inputIndex:e[38],bufferIndex:38,colorR:e[6],colorRIndex:6,colorG:e[7],colorGIndex:7,colorB:e[8],colorBIndex:8},L4:{inputIndex:e[39],bufferIndex:39,colorR:e[9],colorRIndex:9,colorG:e[10],colorGIndex:10,colorB:e[11],colorBIndex:11},L5:{inputIndex:e[40],bufferIndex:40,colorR:e[12],colorRIndex:12,colorG:e[13],colorGIndex:13,colorB:e[14],colorBIndex:14},L6:{colorR:e[15],colorRIndex:15,colorG:e[16],colorGIndex:16,colorB:e[17],colorBIndex:17},R1:{inputIndex:e[41],bufferIndex:41,colorR:e[18],colorRIndex:18,colorG:e[19],colorGIndex:19,colorB:e[20],colorBIndex:20},R2:{inputIndex:e[42],bufferIndex:42,colorR:e[21],colorRIndex:21,colorG:e[22],colorGIndex:22,colorB:e[23],colorBIndex:23},R3:{inputIndex:e[43],bufferIndex:43,colorR:e[24],colorRIndex:24,colorG:e[25],colorGIndex:25,colorB:e[26],colorBIndex:26},R4:{inputIndex:e[44],bufferIndex:44,colorR:e[27],colorRIndex:27,colorG:e[28],colorGIndex:28,colorB:e[29],colorBIndex:29},R5:{inputIndex:e[45],bufferIndex:45,colorR:e[30],colorRIndex:30,colorG:e[31],colorGIndex:31,colorB:e[32],colorBIndex:32},R6:{colorR:e[33],colorRIndex:33,colorG:e[34],colorGIndex:34,colorB:e[35],colorBIndex:35},LS1:{inputIndex:e[46],bufferIndex:46},LS_CW:{inputIndex:e[47],bufferIndex:47},LS_CCW:{inputIndex:e[48],bufferIndex:48},RS1:{inputIndex:e[49],bufferIndex:49},RS_CW:{inputIndex:e[50],bufferIndex:50},RS_CCW:{inputIndex:e[51],bufferIndex:51},LJoystick_UP:{inputIndex:e[52],bufferIndex:52},LJoystick_DOWN:{inputIndex:e[53],bufferIndex:53},LJoystick_LEFT:{inputIndex:e[54],bufferIndex:54},LJoystick_RIGHT:{inputIndex:e[55],bufferIndex:55},LJoystick_CENTER:{inputIndex:e[56],bufferIndex:56},LJoystick_CW:{inputIndex:e[57],bufferIndex:57},LJoystick_CCW:{inputIndex:e[58],bufferIndex:58},RJoystick_UP:{inputIndex:e[59],bufferIndex:59},RJoystick_DOWN:{inputIndex:e[60],bufferIndex:60},RJoystick_LEFT:{inputIndex:e[61],bufferIndex:61},RJoystick_RIGHT:{inputIndex:e[62],bufferIndex:62},RJoystick_CENTER:{inputIndex:e[63],bufferIndex:63},RJoystick_CW:{inputIndex:e[64],bufferIndex:64},RJoystick_CCW:{inputIndex:e[65],bufferIndex:65}}}getButtonConfig(e){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);return this.buttons[e]}setButtonConfig(e,o=null,n=null){if(!Object.hasOwn(this.buttons,e))throw new Error("Invalid button key:"+e);if(o===null&&n===null)throw new Error("Invalid input index and color RGB");const r=this.buttons[e];if(o&&(r.inputIndex=o,this.buffer[r.bufferIndex]=o),n){const s=R(n);r.colorR=s.r,r.colorG=s.g,r.colorB=s.b,this.buffer[r.colorRIndex]=s.r,this.buffer[r.colorGIndex]=s.g,this.buffer[r.colorBIndex]=s.b}}static parseRawData(e){if(e.length%51!==0)throw new Error("Invalid raw data length:"+e.length);const o=[];for(let n=0;n<e.length;n+=51){const r=e.slice(n,n+51);o.push(new v(r))}return o}}const xe={PRO:{label:"PRO",value:1},AIR:{label:"AIR",value:2},GT:{label:"GT",value:3}},be=H("hubConfig",{state:()=>({isAvailable:!1,modelByte:0,lastBridgeConnCarVendorByte:0,majorVersionByte:0,minorVersionByte:0,patchVersionByte:0,profileByte:0,buttonDayBrightness:0,buttonNightBrightness:0,rpmDayBrightness:0,rpmNightBrightness:0,rpmPatternByte:0,rpmStage1ColorR:0,rpmStage1ColorG:0,rpmStage1ColorB:0,rpmStage2ColorR:0,rpmStage2ColorG:0,rpmStage2ColorB:0,rpmStage3ColorR:0,rpmStage3ColorG:0,rpmStage3ColorB:0,rpmRedlineColorR:0,rpmRedlineColorG:0,rpmRedlineColorB:0,buttonConfig:null}),actions:{setIsAvailable(t){this.isAvailable=t},setInfo(t){if(!(t instanceof Uint8Array)){console.error("infoArray is not Uint8Array");return}this.modelByte=t[0],this.lastBridgeConnCarVendorByte=t[1],this.majorVersionByte=t[2]>>4,this.minorVersionByte=t[2]&15,this.patchVersionByte=t[3]},setProfile(t){if(!(t instanceof Uint8Array)){console.error("profileArray is not Uint8Array");return}this.profileByte=t[0]},setBrightness(t){if(!(t instanceof Uint8Array)){console.error("brightnessArray is not Uint8Array");return}this.buttonDayBrightness=Math.min(t[0],100),this.buttonNightBrightness=Math.min(t[1],100),this.rpmDayBrightness=Math.min(t[2],100),this.rpmNightBrightness=Math.min(t[3],100)},setAllButtonConfig(t){if(!(t instanceof Uint8Array)){console.error("buttonConfigArray is not Uint8Array");return}switch(le(xe,this.modelByte).label){case"PRO":this.buttonConfig=new v(t);break;case"AIR":this.buttonConfig=new de(t);break;case"GT":this.buttonConfig=new he(t);break}this.isAvailable=!0},setRpmConfig(t){if(!(t instanceof Uint8Array)){console.error("rpmArray is not Uint8Array");return}this.rpmPatternByte=t[0],this.rpmStage1ColorR=t[1],this.rpmStage1ColorG=t[2],this.rpmStage1ColorB=t[3],this.rpmStage2ColorR=t[4],this.rpmStage2ColorG=t[5],this.rpmStage2ColorB=t[6],this.rpmStage3ColorR=t[7],this.rpmStage3ColorG=t[8],this.rpmStage3ColorB=t[9],this.rpmRedlineColorR=t[10],this.rpmRedlineColorG=t[11],this.rpmRedlineColorB=t[12]}},getters:{}});var C;const c=class c{static verify(e){if(!(e instanceof Uint8Array))throw new Error("Frame must be a Uint8Array");const o=L(w(c,C));if(e[0]!==o[0]||e[1]!==o[1])throw new Error("Invalid frame header");const n=e.slice(0,-1);if(P(n)!==e[e.length-1])throw new Error("Invalid checksum");return{cmd:e[2],data:e.slice(5,-1)}}static generateFrame(e,o){const n=L(w(c,C)),r=o.length,s=new Uint8Array(6+r);s[0]=n[0],s[1]=n[1],s[2]=e,s[3]=r>>8&255,s[4]=r&255,s.set(o,5);const l=P(s.slice(0,-1));return s[s.length-1]=l,s}static generateValidateFrame(e){if(!Object.hasOwn(c.SOURCE_BYTE,e))throw new Error("Invalid source byte");const o=c.SOURCE_BYTE[e],n={type:c.TLV_TYPE.SOURCE,length:1,value:new Uint8Array([o])},{buffer:r}=p([n]);return this.generateFrame(c.CMD_BYTE.VALIDATE,r)}static generateFetchInfoFrame(){const e=[{type:c.CONFIG_BYTE.INFO,length:0,value:null},{type:c.CONFIG_BYTE.PROFILE,length:0,value:null},{type:c.CONFIG_BYTE.BRIGHTNESS,length:0,value:null},{type:c.CONFIG_BYTE.BUTTON,length:0,value:null},{type:c.CONFIG_BYTE.RPM,length:0,value:null}],{buffer:o}=p(e);return this.generateFrame(c.CMD_BYTE.GET_CONFIG,o)}static generateSetProfileFrame(e){const o=[{type:c.CONFIG_BYTE.PROFILE,length:1,value:new Uint8Array([e])}],{buffer:n}=p(o);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,n)}static generateSetBrightnessFrame(e=null,o=null){let n=255;o===null||o>100?n=100:n=o;const r=[{type:c.CONFIG_BYTE.BRIGHTNESS,length:2,value:new Uint8Array([e,n])}],{buffer:s}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,s)}static generateSetButtonDayBrightnessFrame(e=null){return this.generateSetBrightnessFrame(1,e)}static generateSetButtonNightBrightnessFrame(e=null){return this.generateSetBrightnessFrame(2,e)}static generateSetRpmDayBrightnessFrame(e=null){return this.generateSetBrightnessFrame(4,e)}static generateSetRpmNightBrightnessFrame(e=null){return this.generateSetBrightnessFrame(8,e)}static generateEnableBrightnessFrame(e,o){let n=0;e===0&&(n|=1),o===0&&(n|=2);const r=[{type:c.CONFIG_BYTE.ENABLE_BRIGHTNESS,length:1,value:new Uint8Array([n])}],{buffer:s}=p(r);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,s)}static generateEnableDayBrightnessFrame(e){return this.generateEnableBrightnessFrame(1,e)}static generateEnableNightBrightnessFrame(e){return this.generateEnableBrightnessFrame(0,e)}static generateSetButtonFrame(e,o,n=null,r=null){if(e===null)throw new Error("buttonByte cannot be null");if(o===null)throw new Error("profileByte cannot be null");if(n===null&&r===null)throw new Error("func and rgb cannot be null at the same time");let s=0,l=255,i=255,a=255,u=255;if(n!==null&&(s|=1,l=n),r!==null){s|=2;const I=R(r);i=I.r,a=I.g,u=I.b}const d=[{type:c.CONFIG_BYTE.BUTTON,length:7,value:new Uint8Array([e,o,s&255,l,i,a,u])}],{buffer:h}=p(d);return this.generateFrame(c.CMD_BYTE.SET_CONFIG,h)}static generateSetRpmFrame(e,o,n=null){if(e===null&&o===null)throw new Error("patternByte and stageByte cannot be null at the same time");let r=0,s=255,l=255,i=255;if(e!==null)r=1;else if(o!==null&&(r=2,n!==null)){const d=R(n);s=d.r,l=d.g,i=d.b}const a=[{type:c.CONFIG_BYTE.RPM,length:6,value:new Uint8Array([r,e,o,s,l,i])}],{buffer:u}=p(a);return console.log("rpm frame: ",u),this.generateFrame(c.CMD_BYTE.SET_CONFIG,u)}static generateSetRpmPatternFrame(e){return this.generateSetRpmFrame(e,null,null)}static generateSetRpmStage1Color(e){return this.generateSetRpmFrame(null,0,e)}static generateSetRpmStage2Color(e){return this.generateSetRpmFrame(null,1,e)}static generateSetRpmStage3Color(e){return this.generateSetRpmFrame(null,2,e)}static generateSetRpmRedlineColor(e){return this.generateSetRpmFrame(null,3,e)}};C=new WeakMap,b(c,C,"5043"),f(c,"CMD_BYTE",{VALIDATE:0,GET_CONFIG:2,SET_CONFIG:3}),f(c,"TLV_TYPE",{SOURCE:1,CONFIG:2}),f(c,"SOURCE_BYTE",{OK:0,WEBSITE:1,APP:2,EXIT:250,FACTORY:252,FAIL:255}),f(c,"CONFIG_BYTE",{INFO:0,PROFILE:1,BRIGHTNESS:2,BUTTON:3,ENABLE_BRIGHTNESS:4,RPM:5});let U=c;const ke=(t,e)=>{const o=t.__vccOpts||t;for(const[n,r]of e)o[n]=r;return o};export{Le as A,Ge as D,_e as G,xe as H,ue as P,ge as Q,Fe as R,U,ke as _,ye as a,be as b,we as c,Ee as d,Re as e,V as f,ve as g,Y as h,Be as i,me as j,ne as k,se as l,R as m,le as n,Ce as s,Te as t,Se as u};
